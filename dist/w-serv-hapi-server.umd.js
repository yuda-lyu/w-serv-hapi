/*!
 * w-serv-hapi-server v1.0.37
 * (c) 2018-2021 yuda-lyu(semisphere)
 * Released under the MIT License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("@hapi/hapi"),require("@hapi/inert"),require("path"),require("fs"),require("stream"),require("crypto"),require("worker_threads")):"function"==typeof define&&define.amd?define(["@hapi/hapi","@hapi/inert","path","fs","stream","crypto","worker_threads"],t):(e="undefined"!=typeof globalThis?globalThis:e||self)["w-serv-hapi-server"]=t(e["@hapi/hapi"],e["@hapi/inert"],e.path,e.fs,e.stream,e.crypto,e.require$$0)}(this,(function(e,t,n,r,i,o,c){"use strict";var u=Array.isArray,l="object"==typeof global&&global&&global.Object===Object&&global,a="object"==typeof self&&self&&self.Object===Object&&self,s=l||a||Function("return this")(),d=s.Symbol,f=Object.prototype,p=f.hasOwnProperty,g=f.toString,I=d?d.toStringTag:void 0;var h=Object.prototype.toString;var y="[object Null]",m="[object Undefined]",b=d?d.toStringTag:void 0;function C(e){return null==e?void 0===e?m:y:b&&b in Object(e)?function(e){var t=p.call(e,I),n=e[I];try{e[I]=void 0;var r=!0}catch(e){}var i=g.call(e);return r&&(t?e[I]=n:delete e[I]),i}(e):function(e){return h.call(e)}(e)}function v(e){return null!=e&&"object"==typeof e}var Z="[object Symbol]";function X(e){return"symbol"==typeof e||v(e)&&C(e)==Z}var A=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,K=/^\w*$/;function G(e,t){if(u(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!X(e))||(K.test(e)||!A.test(e)||null!=t&&e in Object(t))}function W(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var w="[object AsyncFunction]",H="[object Function]",V="[object GeneratorFunction]",S="[object Proxy]";function j(e){if(!W(e))return!1;var t=C(e);return t==H||t==V||t==w||t==S}var x,Y=s["__core-js_shared__"],J=(x=/[^.]+$/.exec(Y&&Y.keys&&Y.keys.IE_PROTO||""))?"Symbol(src)_1."+x:"";var T=Function.prototype.toString;function R(e){if(null!=e){try{return T.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var P=/^\[object .+?Constructor\]$/,L=Function.prototype,B=Object.prototype,Q=L.toString,O=B.hasOwnProperty,k=RegExp("^"+Q.call(O).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function N(e){return!(!W(e)||(t=e,J&&J in t))&&(j(e)?k:P).test(R(e));var t}function F(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return N(n)?n:void 0}var U=F(Object,"create");var z=Object.prototype.hasOwnProperty;var M=Object.prototype.hasOwnProperty;function _(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function D(e,t){return e===t||e!=e&&t!=t}function E(e,t){for(var n=e.length;n--;)if(D(e[n][0],t))return n;return-1}_.prototype.clear=function(){this.__data__=U?U(null):{},this.size=0},_.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},_.prototype.get=function(e){var t=this.__data__;if(U){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return z.call(t,e)?t[e]:void 0},_.prototype.has=function(e){var t=this.__data__;return U?void 0!==t[e]:M.call(t,e)},_.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=U&&void 0===t?"__lodash_hash_undefined__":t,this};var $=Array.prototype.splice;function q(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}q.prototype.clear=function(){this.__data__=[],this.size=0},q.prototype.delete=function(e){var t=this.__data__,n=E(t,e);return!(n<0)&&(n==t.length-1?t.pop():$.call(t,n,1),--this.size,!0)},q.prototype.get=function(e){var t=this.__data__,n=E(t,e);return n<0?void 0:t[n][1]},q.prototype.has=function(e){return E(this.__data__,e)>-1},q.prototype.set=function(e,t){var n=this.__data__,r=E(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var ee=F(s,"Map");function te(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function ne(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ne.prototype.clear=function(){this.size=0,this.__data__={hash:new _,map:new(ee||q),string:new _}},ne.prototype.delete=function(e){var t=te(this,e).delete(e);return this.size-=t?1:0,t},ne.prototype.get=function(e){return te(this,e).get(e)},ne.prototype.has=function(e){return te(this,e).has(e)},ne.prototype.set=function(e,t){var n=te(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};var re="Expected a function";function ie(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(re);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var c=e.apply(this,r);return n.cache=o.set(i,c)||o,c};return n.cache=new(ie.Cache||ne),n}ie.Cache=ne;var oe,ce,ue,le=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ae=/\\(\\)?/g,se=(oe=function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(le,(function(e,n,r,i){t.push(r?i.replace(ae,"$1"):n||e)})),t},ce=ie(oe,(function(e){return 500===ue.size&&ue.clear(),e})),ue=ce.cache,ce),de=se;function fe(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var pe=1/0,ge=d?d.prototype:void 0,Ie=ge?ge.toString:void 0;function he(e){if("string"==typeof e)return e;if(u(e))return fe(e,he)+"";if(X(e))return Ie?Ie.call(e):"";var t=e+"";return"0"==t&&1/e==-pe?"-0":t}function ye(e){return null==e?"":he(e)}function me(e,t){return u(e)?e:G(e,t)?[e]:de(ye(e))}var be=1/0;function Ce(e){if("string"==typeof e||X(e))return e;var t=e+"";return"0"==t&&1/e==-be?"-0":t}function ve(e,t){for(var n=0,r=(t=me(t,e)).length;null!=e&&n<r;)e=e[Ce(t[n++])];return n&&n==r?e:void 0}function Ze(e,t,n){var r=null==e?void 0:ve(e,t);return void 0===r?n:r}var Xe="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ae={};!function(e,t){e.exports=function(){var e=1e3,t=6e4,n=36e5,r="millisecond",i="second",o="minute",c="hour",u="day",l="week",a="month",s="quarter",d="year",f="date",p="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,I=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,h={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},y=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},m={s:y,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),i=n%60;return(t<=0?"+":"-")+y(r,2,"0")+":"+y(i,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),i=t.clone().add(r,a),o=n-i<0,c=t.clone().add(r+(o?-1:1),a);return+(-(r+(n-i)/(o?i-c:c-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:a,y:d,w:l,d:u,D:f,h:c,m:o,s:i,ms:r,Q:s}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},b="en",C={};C[b]=h;var v="$isDayjsObject",Z=function(e){return e instanceof G||!(!e||!e[v])},X=function e(t,n,r){var i;if(!t)return b;if("string"==typeof t){var o=t.toLowerCase();C[o]&&(i=o),n&&(C[o]=n,i=o);var c=t.split("-");if(!i&&c.length>1)return e(c[0])}else{var u=t.name;C[u]=t,i=u}return!r&&i&&(b=i),i||!r&&b},A=function(e,t){if(Z(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new G(n)},K=m;K.l=X,K.i=Z,K.w=function(e,t){return A(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var G=function(){function h(e){this.$L=X(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[v]=!0}var y=h.prototype;return y.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(K.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(g);if(r){var i=r[2]-1||0,o=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)}}return new Date(t)}(e),this.init()},y.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},y.$utils=function(){return K},y.isValid=function(){return!(this.$d.toString()===p)},y.isSame=function(e,t){var n=A(e);return this.startOf(t)<=n&&n<=this.endOf(t)},y.isAfter=function(e,t){return A(e)<this.startOf(t)},y.isBefore=function(e,t){return this.endOf(t)<A(e)},y.$g=function(e,t,n){return K.u(e)?this[t]:this.set(n,e)},y.unix=function(){return Math.floor(this.valueOf()/1e3)},y.valueOf=function(){return this.$d.getTime()},y.startOf=function(e,t){var n=this,r=!!K.u(t)||t,s=K.p(e),p=function(e,t){var i=K.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return r?i:i.endOf(u)},g=function(e,t){return K.w(n.toDate()[e].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},I=this.$W,h=this.$M,y=this.$D,m="set"+(this.$u?"UTC":"");switch(s){case d:return r?p(1,0):p(31,11);case a:return r?p(1,h):p(0,h+1);case l:var b=this.$locale().weekStart||0,C=(I<b?I+7:I)-b;return p(r?y-C:y+(6-C),h);case u:case f:return g(m+"Hours",0);case c:return g(m+"Minutes",1);case o:return g(m+"Seconds",2);case i:return g(m+"Milliseconds",3);default:return this.clone()}},y.endOf=function(e){return this.startOf(e,!1)},y.$set=function(e,t){var n,l=K.p(e),s="set"+(this.$u?"UTC":""),p=(n={},n[u]=s+"Date",n[f]=s+"Date",n[a]=s+"Month",n[d]=s+"FullYear",n[c]=s+"Hours",n[o]=s+"Minutes",n[i]=s+"Seconds",n[r]=s+"Milliseconds",n)[l],g=l===u?this.$D+(t-this.$W):t;if(l===a||l===d){var I=this.clone().set(f,1);I.$d[p](g),I.init(),this.$d=I.set(f,Math.min(this.$D,I.daysInMonth())).$d}else p&&this.$d[p](g);return this.init(),this},y.set=function(e,t){return this.clone().$set(e,t)},y.get=function(e){return this[K.p(e)]()},y.add=function(r,s){var f,p=this;r=Number(r);var g=K.p(s),I=function(e){var t=A(p);return K.w(t.date(t.date()+Math.round(e*r)),p)};if(g===a)return this.set(a,this.$M+r);if(g===d)return this.set(d,this.$y+r);if(g===u)return I(1);if(g===l)return I(7);var h=(f={},f[o]=t,f[c]=n,f[i]=e,f)[g]||1,y=this.$d.getTime()+r*h;return K.w(y,this)},y.subtract=function(e,t){return this.add(-1*e,t)},y.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||p;var r=e||"YYYY-MM-DDTHH:mm:ssZ",i=K.z(this),o=this.$H,c=this.$m,u=this.$M,l=n.weekdays,a=n.months,s=n.meridiem,d=function(e,n,i,o){return e&&(e[n]||e(t,r))||i[n].slice(0,o)},f=function(e){return K.s(o%12||12,e,"0")},g=s||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r};return r.replace(I,(function(e,r){return r||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return K.s(t.$y,4,"0");case"M":return u+1;case"MM":return K.s(u+1,2,"0");case"MMM":return d(n.monthsShort,u,a,3);case"MMMM":return d(a,u);case"D":return t.$D;case"DD":return K.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return d(n.weekdaysMin,t.$W,l,2);case"ddd":return d(n.weekdaysShort,t.$W,l,3);case"dddd":return l[t.$W];case"H":return String(o);case"HH":return K.s(o,2,"0");case"h":return f(1);case"hh":return f(2);case"a":return g(o,c,!0);case"A":return g(o,c,!1);case"m":return String(c);case"mm":return K.s(c,2,"0");case"s":return String(t.$s);case"ss":return K.s(t.$s,2,"0");case"SSS":return K.s(t.$ms,3,"0");case"Z":return i}return null}(e)||i.replace(":","")}))},y.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},y.diff=function(r,f,p){var g,I=this,h=K.p(f),y=A(r),m=(y.utcOffset()-this.utcOffset())*t,b=this-y,C=function(){return K.m(I,y)};switch(h){case d:g=C()/12;break;case a:g=C();break;case s:g=C()/3;break;case l:g=(b-m)/6048e5;break;case u:g=(b-m)/864e5;break;case c:g=b/n;break;case o:g=b/t;break;case i:g=b/e;break;default:g=b}return p?g:K.a(g)},y.daysInMonth=function(){return this.endOf(a).$D},y.$locale=function(){return C[this.$L]},y.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=X(e,t,!0);return r&&(n.$L=r),n},y.clone=function(){return K.w(this.$d,this)},y.toDate=function(){return new Date(this.valueOf())},y.toJSON=function(){return this.isValid()?this.toISOString():null},y.toISOString=function(){return this.$d.toISOString()},y.toString=function(){return this.$d.toUTCString()},h}(),W=G.prototype;return A.prototype=W,[["$ms",r],["$s",i],["$m",o],["$H",c],["$W",u],["$M",a],["$y",d],["$D",f]].forEach((function(e){W[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),A.extend=function(e,t){return e.$i||(e(t,G,A),e.$i=!0),A},A.locale=X,A.isDayjs=Z,A.unix=function(e){return A(1e3*e)},A.en=C[b],A.Ls=C,A.p={},A}()}({get exports(){return Ae},set exports(e){Ae=e}});var Ke=Ae;function Ge(e){let t=Object.prototype.toString.call(e);return"[object Function]"===t||"[object AsyncFunction]"===t}function We(){if(!Ge(Ke))throw new Error("invalid dayjs");return Ke().format("YYYY-MM-DDTHH:mm:ssZ")}var we=/\s/;var He=/^\s+/;function Ve(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&we.test(e.charAt(t)););return t}(e)+1).replace(He,""):e}var Se=NaN,je=/^[-+]0x[0-9a-f]+$/i,xe=/^0b[01]+$/i,Ye=/^0o[0-7]+$/i,Je=parseInt;function Te(e){if("number"==typeof e)return e;if(X(e))return Se;if(W(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=W(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Ve(e);var n=xe.test(e);return n||Ye.test(e)?Je(e.slice(2),n?2:8):je.test(e)?Se:+e}var Re=1/0,Pe=17976931348623157e292;function Le(e){return e?(e=Te(e))===Re||e===-Re?(e<0?-1:1)*Pe:e==e?e:0:0===e?e:0}function Be(e){var t=Le(e),n=t%1;return t==t?n?t-n:t:0}function Qe(e){return"[object String]"===Object.prototype.toString.call(e)}function Oe(e){return!(!Qe(e)||""===e)}function ke(e){return e!=e}function Ne(e){let t=!1;if(Oe(e))t=!isNaN(Number(e));else if(function(e){return"[object Number]"===Object.prototype.toString.call(e)}(e)){if(ke(e))return!1;t=!0}return t}function Fe(e){if(!Ne(e))return 0;return Le(e)}function Ue(e){return!!Ne(e)&&(e=Fe(e),"number"==typeof(t=e)&&t==Be(t));var t}var ze=s.isFinite,Me=Math.min;var _e=function(e){var t=Math[e];return function(e,n){if(e=Te(e),(n=null==n?0:Me(Be(n),292))&&ze(e)){var r=(ye(e)+"e").split("e");return+((r=(ye(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}("round"),De=_e;function Ee(e){if(!Ne(e))return 0;e=Fe(e);let t=De(e);return"0"===String(t)?0:t}function $e(e){if(!Ue(e))return!1;return Ee(e)>0}let qe="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),et=qe.length;function tt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32,t=[];e=$e(e)?Ee(e):32;for(let n=0;n<e;n++)t[n]=qe[0|Math.random()*et];return t.join("")}function nt(e){return"[object Array]"===Object.prototype.toString.call(e)}function rt(e){return"[object Undefined]"===Object.prototype.toString.call(e)}function it(e){return"[object Object]"===Object.prototype.toString.call(e)}function ot(e){if(it(e)){for(let t in e)return!1;return!0}return!1}function ct(e){return!!rt(e)||(!!function(e){return"[object Null]"===Object.prototype.toString.call(e)}(e)||(!!ot(e)||(!!function(e){return!(!Qe(e)||""!==e)}(e)||(!!function(e){return!!nt(e)&&0===e.length}(e)||!!ke(e)))))}function ut(e){return!!nt(e)&&(0!==e.length&&(1!==e.length||!ct(e[0])))}var lt="[object Boolean]";function at(e){return!0===(t=e)||!1===t||v(t)&&C(t)==lt;var t}var st={};!function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,c){if("function"!=typeof r)throw new TypeError("The listener must be a function");var u=new i(r,o||e,c),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],u]:e._events[l].push(u):(e._events[l]=u,e._eventsCount++),e}function c(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function u(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),u.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},u.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,c=new Array(o);i<o;i++)c[i]=r[i].fn;return c},u.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},u.prototype.emit=function(e,t,r,i,o,c){var u=n?n+e:e;if(!this._events[u])return!1;var l,a,s=this._events[u],d=arguments.length;if(s.fn){switch(s.once&&this.removeListener(e,s.fn,void 0,!0),d){case 1:return s.fn.call(s.context),!0;case 2:return s.fn.call(s.context,t),!0;case 3:return s.fn.call(s.context,t,r),!0;case 4:return s.fn.call(s.context,t,r,i),!0;case 5:return s.fn.call(s.context,t,r,i,o),!0;case 6:return s.fn.call(s.context,t,r,i,o,c),!0}for(a=1,l=new Array(d-1);a<d;a++)l[a-1]=arguments[a];s.fn.apply(s.context,l)}else{var f,p=s.length;for(a=0;a<p;a++)switch(s[a].once&&this.removeListener(e,s[a].fn,void 0,!0),d){case 1:s[a].fn.call(s[a].context);break;case 2:s[a].fn.call(s[a].context,t);break;case 3:s[a].fn.call(s[a].context,t,r);break;case 4:s[a].fn.call(s[a].context,t,r,i);break;default:if(!l)for(f=1,l=new Array(d-1);f<d;f++)l[f-1]=arguments[f];s[a].fn.apply(s[a].context,l)}}return!0},u.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},u.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},u.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return c(this,o),this;var u=this._events[o];if(u.fn)u.fn!==t||i&&!u.once||r&&u.context!==r||c(this,o);else{for(var l=0,a=[],s=u.length;l<s;l++)(u[l].fn!==t||i&&!u[l].once||r&&u[l].context!==r)&&a.push(u[l]);a.length?this._events[o]=1===a.length?a[0]:a:c(this,o)}return this},u.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&c(this,t)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,e.exports=u}({get exports(){return st},set exports(e){st=e}});var dt=st;function ft(){return new dt}function pt(){let e,t,n=new Promise((function(){e=arguments[0],t=arguments[1]}));return n.resolve=e,n.reject=t,n}function gt(e){let t,n=Object.prototype.toString.call(e);if(t="[object Promise]"===n,t)return!0;if("[object Function]"!==n)return!1;try{t="function"!=typeof e.subscribe&&"function"==typeof e.then}catch(e){}return t}async function It(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,r=pt();if(!Ge(e))return r.reject("waitfunction需輸入函數f"),r;let i=async()=>{let t=e();return gt(t)&&(t=await t),t};if(n=await i(),!0===n)return r.resolve(),r;let o=Ze(t,"attemptNum",null);$e(o)||(o=200);let c=Ze(t,"timeInterval",null);$e(c)||(c=1e3);let u=0,l=setInterval((async()=>{u+=1,n=await i(),!0===n&&(clearInterval(l),r.resolve()),u>o&&(clearInterval(l),r.reject(`exceeded attemptNum[${o}]`))}),c);return r}var ht="[object Number]";function yt(e){return"number"==typeof e||v(e)&&C(e)==ht}function mt(e){if(it(e)){for(let t in e)return!0;return!1}return!1}function bt(e){if(!Ue(e))return!1;return Ee(e)>=0}function Ct(e){if(!Oe(e)&&!Ne(e)&&!X(e))return"";let t="";try{t=String(e)}catch(e){}try{t=e.toString()}catch(e){}return t}var vt={};var Zt,Xt={},At={get exports(){return Xt},set exports(e){Xt=e}};function Kt(){return Zt||(Zt=1,function(e,t){var n;e.exports=(n=n||function(e,t){var n;if("undefined"!=typeof window&&window.crypto&&(n=window.crypto),"undefined"!=typeof self&&self.crypto&&(n=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(n=globalThis.crypto),!n&&"undefined"!=typeof window&&window.msCrypto&&(n=window.msCrypto),!n&&void 0!==Xe&&Xe.crypto&&(n=Xe.crypto),!n)try{n=require("crypto")}catch(e){}var r=function(){if(n){if("function"==typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},i=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),o={},c=o.lib={},u=c.Base={extend:function(e){var t=i(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},l=c.WordArray=u.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||s).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var c=n[o>>>2]>>>24-o%4*8&255;t[r+o>>>2]|=c<<24-(r+o)%4*8}else for(var u=0;u<i;u+=4)t[r+u>>>2]=n[u>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=u.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(r());return new l.init(t,e)}}),a=o.enc={},s=a.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new l.init(n,t/2)}},d=a.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new l.init(n,t)}},f=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(d.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return d.parse(unescape(encodeURIComponent(e)))}},p=c.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=f.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,r=this._data,i=r.words,o=r.sigBytes,c=this.blockSize,u=o/(4*c),a=(u=t?e.ceil(u):e.max((0|u)-this._minBufferSize,0))*c,s=e.min(4*a,o);if(a){for(var d=0;d<a;d+=c)this._doProcessBlock(i,d);n=i.splice(0,a),r.sigBytes-=s}return new l.init(n,s)},clone:function(){var e=u.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});c.Hasher=p.extend({cfg:u.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new g.HMAC.init(e,n).finalize(t)}}});var g=o.algo={};return o}(Math),n)}(At)),Xt}!function(e,t){e.exports=Kt().enc.Utf8}({get exports(){return vt},set exports(e){vt=e}});var Gt=vt,Wt={};!function(e,t){var n;e.exports=(n=Kt(),function(){var e=n,t=e.lib.WordArray;function r(e,n,r){for(var i=[],o=0,c=0;c<n;c++)if(c%4){var u=r[e.charCodeAt(c-1)]<<c%4*2|r[e.charCodeAt(c)]>>>6-c%4*2;i[o>>>2]|=u<<24-o%4*8,o++}return t.create(i,o)}e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var i=[],o=0;o<n;o+=3)for(var c=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,u=0;u<4&&o+.75*u<n;u++)i.push(r.charAt(c>>>6*(3-u)&63));var l=r.charAt(64);if(l)for(;i.length%4;)i.push(l);return i.join("")},parse:function(e){var t=e.length,n=this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var o=0;o<n.length;o++)i[n.charCodeAt(o)]=o}var c=n.charAt(64);if(c){var u=e.indexOf(c);-1!==u&&(t=u)}return r(e,t,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),n.enc.Base64)}({get exports(){return Wt},set exports(e){Wt=e}});var wt=Wt;function Ht(e){if(!Oe(e))return"";let t=Gt.parse(e);return wt.stringify(t)}function Vt(e,t){return!!it(e)&&(!(!Oe(t)&&!Ne(t))&&t in e)}function St(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}var jt,xt=function(e,t,n){for(var r=-1,i=Object(e),o=n(e),c=o.length;c--;){var u=o[jt?c:++r];if(!1===t(i[u],u,i))break}return e};function Yt(e){return v(e)&&"[object Arguments]"==C(e)}var Jt=Object.prototype,Tt=Jt.hasOwnProperty,Rt=Jt.propertyIsEnumerable,Pt=Yt(function(){return arguments}())?Yt:function(e){return v(e)&&Tt.call(e,"callee")&&!Rt.call(e,"callee")},Lt=Pt;var Bt="object"==typeof exports&&exports&&!exports.nodeType&&exports,Qt=Bt&&"object"==typeof module&&module&&!module.nodeType&&module,Ot=Qt&&Qt.exports===Bt?s.Buffer:void 0,kt=(Ot?Ot.isBuffer:void 0)||function(){return!1},Nt=9007199254740991,Ft=/^(?:0|[1-9]\d*)$/;function Ut(e,t){var n=typeof e;return!!(t=null==t?Nt:t)&&("number"==n||"symbol"!=n&&Ft.test(e))&&e>-1&&e%1==0&&e<t}var zt=9007199254740991;function Mt(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=zt}var _t={};function Dt(e){return function(t){return e(t)}}_t["[object Float32Array]"]=_t["[object Float64Array]"]=_t["[object Int8Array]"]=_t["[object Int16Array]"]=_t["[object Int32Array]"]=_t["[object Uint8Array]"]=_t["[object Uint8ClampedArray]"]=_t["[object Uint16Array]"]=_t["[object Uint32Array]"]=!0,_t["[object Arguments]"]=_t["[object Array]"]=_t["[object ArrayBuffer]"]=_t["[object Boolean]"]=_t["[object DataView]"]=_t["[object Date]"]=_t["[object Error]"]=_t["[object Function]"]=_t["[object Map]"]=_t["[object Number]"]=_t["[object Object]"]=_t["[object RegExp]"]=_t["[object Set]"]=_t["[object String]"]=_t["[object WeakMap]"]=!1;var Et="object"==typeof exports&&exports&&!exports.nodeType&&exports,$t=Et&&"object"==typeof module&&module&&!module.nodeType&&module,qt=$t&&$t.exports===Et&&l.process,en=function(){try{var e=$t&&$t.require&&$t.require("util").types;return e||qt&&qt.binding&&qt.binding("util")}catch(e){}}(),tn=en&&en.isTypedArray,nn=tn?Dt(tn):function(e){return v(e)&&Mt(e.length)&&!!_t[C(e)]},rn=Object.prototype.hasOwnProperty;function on(e,t){var n=u(e),r=!n&&Lt(e),i=!n&&!r&&kt(e),o=!n&&!r&&!i&&nn(e),c=n||r||i||o,l=c?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],a=l.length;for(var s in e)!t&&!rn.call(e,s)||c&&("length"==s||i&&("offset"==s||"parent"==s)||o&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||Ut(s,a))||l.push(s);return l}var cn=Object.prototype;function un(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||cn)}function ln(e,t){return function(n){return e(t(n))}}var an=ln(Object.keys,Object),sn=Object.prototype.hasOwnProperty;function dn(e){if(!un(e))return an(e);var t=[];for(var n in Object(e))sn.call(e,n)&&"constructor"!=n&&t.push(n);return t}function fn(e){return null!=e&&Mt(e.length)&&!j(e)}function pn(e){return fn(e)?on(e):dn(e)}var gn=function(e,t){return function(n,r){if(null==n)return n;if(!fn(n))return e(n,r);for(var i=n.length,o=t?i:-1,c=Object(n);(t?o--:++o<i)&&!1!==r(c[o],o,c););return n}}((function(e,t){return e&&xt(e,t,pn)})),In=gn;function hn(e){return e}function yn(e,t){var n;return(u(e)?St:In)(e,"function"==typeof(n=t)?n:hn)}function mn(e){return"[object ArrayBuffer]"===Object.prototype.toString.call(e)}function bn(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)}function Cn(e){return"[object Uint16Array]"===Object.prototype.toString.call(e)}function vn(e){if(!(mn(e)||(t=e,"[object Blob]"===Object.prototype.toString.call(t))||bn(e)||Cn(e)))return null;var t;try{if(e.byteLength)return e.byteLength}catch(e){}try{if(e.length)return e.length}catch(e){}try{if(e.size)return e.size}catch(e){}return null}var Zn=ln(Object.getPrototypeOf,Object),Xn="[object Object]",An=Function.prototype,Kn=Object.prototype,Gn=An.toString,Wn=Kn.hasOwnProperty,wn=Gn.call(Object);function Hn(e){if(!v(e)||C(e)!=Xn)return!1;var t=Zn(e);if(null===t)return!0;var n=Wn.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Gn.call(n)==wn}var Vn="[object DOMException]",Sn="[object Error]";function jn(e){if(!it(e))return{results:"",binarys:[]};if(ot(e))return{results:"",binarys:[]};let t="",n=[];try{let r=-1;t=JSON.stringify(e,(function(e,t){if(bn(t)){r+=1;let e=`[Uint8Array]::${r}`;return n.push(t),e}if(Cn(t)){r+=1;let e=`[Uint16Array]::${r}`;return n.push(t),e}if(mn(t)){r+=1;let e=`[ArrayBuffer]::${r}`;return n.push(t),e}return function(e){if(!v(e))return!1;var t=C(e);return t==Sn||t==Vn||"string"==typeof e.message&&"string"==typeof e.name&&!Hn(e)}(t)&&(t=t.toString()),t}))}catch(e){}return{results:t,binarys:n}}function xn(e){if(!Oe(e))return new Uint8Array;let t;try{t=function(e){if(!Qe(e))return new Uint8Array;let t=wt.parse(e),n=t.words,r=t.sigBytes,i=new Uint8Array(r);for(let e=0;e<r;e++){let t=n[e>>>2]>>>24-e%4*8&255;i[e]=t}return i}(Ht(e))}catch(e){return new Uint8Array}return t}function Yn(e,t){return function(e,t,n,r,i,o){if(!Ne(e))return null;if(!bn(t))return null;if(!Ue(n))return null;if(!at(r))return null;if(!Ue(i))return null;if(!Ue(o))return null;let c,u,l;e=Fe(e);let a=8*o-i-1,s=(1<<a)-1,d=s>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?o-1:0,g=r?-1:1,I=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,c=s):(c=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-c))<1&&(c--,l*=2),(e+=c+d>=1?f/l:f*Math.pow(2,1-d))*l>=2&&(c++,l/=2),c+d>=s?(u=0,c=s):c+d>=1?(u=(e*l-1)*Math.pow(2,i),c+=d):(u=e*Math.pow(2,d-1)*Math.pow(2,i),c=0));i>=8;t[n+p]=255&u,p+=g,u/=256,i-=8);for(c=c<<i|u,a+=i;a>0;t[n+p]=255&c,p+=g,c/=256,a-=8);return t[n+p-g]|=128*I,null}(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,!(arguments.length>3&&void 0!==arguments[3])||arguments[3],arguments.length>4&&void 0!==arguments[4]?arguments[4]:52,arguments.length>5&&void 0!==arguments[5]?arguments[5]:8)}function Jn(e){let t=[],n=[];if(!ut(e)&&!mt(e))return null;let r=[],i=[];function o(e){r.push(vn(e)),i.push(e)}try{let c=jn(e);o(xn(c.results)),yn(c.binarys,(e=>{o(e)}));let u=r,l=xn(JSON.stringify(u)),a=new Uint8Array(8);Yn(vn(l),a),t.push(a),t.push(l),yn(i,(e=>{t.push(e)})),yn(t,(e=>{n=function(e,t){let n=vn(e),r=vn(t),i=new Uint8Array(n+r);return i.set(new Uint8Array(e),0),i.set(new Uint8Array(t),n),i}(n,e)}))}catch(e){return null}return n}function Tn(e){return function(e,t,n,r,i){if(!bn(e))return null;if(!Ue(t))return null;if(!at(n))return null;if(!Ue(r))return null;if(!Ue(i))return null;let o,c,u=8*i-r-1,l=(1<<u)-1,a=l>>1,s=-7,d=n?0:i-1,f=n?1:-1,p=e[t+d];for(d+=f,o=p&(1<<-s)-1,p>>=-s,s+=u;s>0;o=256*o+e[t+d],d+=f,s-=8);for(c=o&(1<<-s)-1,o>>=-s,s+=r;s>0;c=256*c+e[t+d],d+=f,s-=8);if(0===o)o=1-a;else{if(o===l)return c?NaN:1/0*(p?-1:1);c+=Math.pow(2,r),o-=a}return(p?-1:1)*c*Math.pow(2,o-r)}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,!(arguments.length>2&&void 0!==arguments[2])||arguments[2],arguments.length>3&&void 0!==arguments[3]?arguments[3]:52,arguments.length>4&&void 0!==arguments[4]?arguments[4]:8)}var Rn={};!function(e,t){var n;e.exports=(n=Kt(),function(){if("function"==typeof ArrayBuffer){var e=n.lib.WordArray,t=e.init,r=e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var n=e.byteLength,r=[],i=0;i<n;i++)r[i>>>2]|=e[i]<<24-i%4*8;t.call(this,r,n)}else t.apply(this,arguments)};r.prototype=e}}(),n.lib.WordArray)}({get exports(){return Rn},set exports(e){Rn=e}});var Pn=Rn;function Ln(e){if(!bn(e))return"";let t;try{n=function(e){return bn(e)?Pn.create(e).toString(wt):""}(e),t=Oe(n)?wt.parse(n).toString(Gt):""}catch(e){return""}var n;return t}function Bn(e){let t=null;if(!bn(e))return null;try{let n=8,r=e.slice(0,n),i=e.slice(n,vn(e)),o=Tn(r),c=i.slice(0,o),u=i.slice(o,vn(i)),l=Ln(c),a=function(e,t){let n=0,r=0,i=[];return yn(t,(t=>{r=n+t;let o=e.slice(n,r);n=r,i.push(o)})),i}(u,JSON.parse(l));t=function(e){if(!mt(e))return{};let{results:t,binarys:n}=e;if(!Oe(t))return{};if(!nt(n))return{};let r={};try{r=JSON.parse(t,(function(e,t){if(Oe(t)){if(t.indexOf("[Uint8Array]::")>=0){let e=Ee(t.replace("[Uint8Array]::",""));return n[e]}if(t.indexOf("[Uint16Array]::")>=0){let e=Ee(t.replace("[Uint16Array]::",""));return n[e]}if(t.indexOf("[ArrayBuffer]::")>=0){let e=Ee(t.replace("[ArrayBuffer]::",""));return n[e]}}return t}))}catch(e){}return r}({results:Ln(a.shift()),binarys:a})}catch(e){}return t}function Qn(e){let t=Ze(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},"fs");return!!t.existsSync(e)&&(!t.lstatSync(e).isDirectory()&&!t.lstatSync(e).isSymbolicLink())}function On(e){let t=Ze(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},"fs");if(!t.existsSync(e))return!1;let n=t.lstatSync(e);return!n.isFile()&&!n.isSymbolicLink()}function kn(e){return function(e){let t=Ze(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},"fs");if(On(e,{fs:t}))return{success:"input folder is already exists: "+e};if(t.existsSync(e))return{error:"input path already exists: "+e};try{t.mkdirSync(e,{recursive:!0})}catch(e){return{error:e}}return{success:"done: "+e}}(e,{fs:r})}function Nn(e){return Nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nn(e)}function Fn(e){var t=function(e,t){if("object"!==Nn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Nn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Nn(t)?t:String(t)}function Un(e,t,n){return(t=Fn(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const zn=new Uint8Array([0,97,115,109,1,0,0,0,1,48,8,96,3,127,127,127,1,127,96,3,127,127,127,0,96,2,127,127,0,96,1,127,1,127,96,3,127,127,126,1,126,96,3,126,127,127,1,126,96,2,127,126,0,96,1,127,1,126,3,11,10,0,0,2,1,3,4,5,6,1,7,5,3,1,0,1,7,85,9,3,109,101,109,2,0,5,120,120,104,51,50,0,0,6,105,110,105,116,51,50,0,2,8,117,112,100,97,116,101,51,50,0,3,8,100,105,103,101,115,116,51,50,0,4,5,120,120,104,54,52,0,5,6,105,110,105,116,54,52,0,7,8,117,112,100,97,116,101,54,52,0,8,8,100,105,103,101,115,116,54,52,0,9,10,251,22,10,242,1,1,4,127,32,0,32,1,106,33,3,32,1,65,16,79,4,127,32,3,65,16,107,33,6,32,2,65,168,136,141,161,2,106,33,3,32,2,65,137,235,208,208,7,107,33,4,32,2,65,207,140,162,142,6,106,33,5,3,64,32,3,32,0,40,2,0,65,247,148,175,175,120,108,106,65,13,119,65,177,243,221,241,121,108,33,3,32,4,32,0,65,4,106,34,0,40,2,0,65,247,148,175,175,120,108,106,65,13,119,65,177,243,221,241,121,108,33,4,32,2,32,0,65,4,106,34,0,40,2,0,65,247,148,175,175,120,108,106,65,13,119,65,177,243,221,241,121,108,33,2,32,5,32,0,65,4,106,34,0,40,2,0,65,247,148,175,175,120,108,106,65,13,119,65,177,243,221,241,121,108,33,5,32,6,32,0,65,4,106,34,0,79,13,0,11,32,2,65,12,119,32,5,65,18,119,106,32,4,65,7,119,106,32,3,65,1,119,106,5,32,2,65,177,207,217,178,1,106,11,32,1,106,32,0,32,1,65,15,113,16,1,11,146,1,0,32,1,32,2,106,33,2,3,64,32,1,65,4,106,32,2,75,69,4,64,32,0,32,1,40,2,0,65,189,220,202,149,124,108,106,65,17,119,65,175,214,211,190,2,108,33,0,32,1,65,4,106,33,1,12,1,11,11,3,64,32,1,32,2,79,69,4,64,32,0,32,1,45,0,0,65,177,207,217,178,1,108,106,65,11,119,65,177,243,221,241,121,108,33,0,32,1,65,1,106,33,1,12,1,11,11,32,0,32,0,65,15,118,115,65,247,148,175,175,120,108,34,0,65,13,118,32,0,115,65,189,220,202,149,124,108,34,0,65,16,118,32,0,115,11,63,0,32,0,65,8,106,32,1,65,168,136,141,161,2,106,54,2,0,32,0,65,12,106,32,1,65,137,235,208,208,7,107,54,2,0,32,0,65,16,106,32,1,54,2,0,32,0,65,20,106,32,1,65,207,140,162,142,6,106,54,2,0,11,195,4,1,6,127,32,1,32,2,106,33,6,32,0,65,24,106,33,4,32,0,65,40,106,40,2,0,33,3,32,0,32,0,40,2,0,32,2,106,54,2,0,32,0,65,4,106,34,5,32,5,40,2,0,32,2,65,16,79,32,0,40,2,0,65,16,79,114,114,54,2,0,32,2,32,3,106,65,16,73,4,64,32,3,32,4,106,32,1,32,2,252,10,0,0,32,0,65,40,106,32,2,32,3,106,54,2,0,15,11,32,3,4,64,32,3,32,4,106,32,1,65,16,32,3,107,34,2,252,10,0,0,32,0,65,8,106,34,3,32,3,40,2,0,32,4,40,2,0,65,247,148,175,175,120,108,106,65,13,119,65,177,243,221,241,121,108,54,2,0,32,0,65,12,106,34,3,32,3,40,2,0,32,4,65,4,106,40,2,0,65,247,148,175,175,120,108,106,65,13,119,65,177,243,221,241,121,108,54,2,0,32,0,65,16,106,34,3,32,3,40,2,0,32,4,65,8,106,40,2,0,65,247,148,175,175,120,108,106,65,13,119,65,177,243,221,241,121,108,54,2,0,32,0,65,20,106,34,3,32,3,40,2,0,32,4,65,12,106,40,2,0,65,247,148,175,175,120,108,106,65,13,119,65,177,243,221,241,121,108,54,2,0,32,0,65,40,106,65,0,54,2,0,32,1,32,2,106,33,1,11,32,1,32,6,65,16,107,77,4,64,32,6,65,16,107,33,8,32,0,65,8,106,40,2,0,33,2,32,0,65,12,106,40,2,0,33,3,32,0,65,16,106,40,2,0,33,5,32,0,65,20,106,40,2,0,33,7,3,64,32,2,32,1,40,2,0,65,247,148,175,175,120,108,106,65,13,119,65,177,243,221,241,121,108,33,2,32,3,32,1,65,4,106,34,1,40,2,0,65,247,148,175,175,120,108,106,65,13,119,65,177,243,221,241,121,108,33,3,32,5,32,1,65,4,106,34,1,40,2,0,65,247,148,175,175,120,108,106,65,13,119,65,177,243,221,241,121,108,33,5,32,7,32,1,65,4,106,34,1,40,2,0,65,247,148,175,175,120,108,106,65,13,119,65,177,243,221,241,121,108,33,7,32,8,32,1,65,4,106,34,1,79,13,0,11,32,0,65,8,106,32,2,54,2,0,32,0,65,12,106,32,3,54,2,0,32,0,65,16,106,32,5,54,2,0,32,0,65,20,106,32,7,54,2,0,11,32,1,32,6,73,4,64,32,4,32,1,32,6,32,1,107,34,1,252,10,0,0,32,0,65,40,106,32,1,54,2,0,11,11,97,1,1,127,32,0,65,16,106,40,2,0,33,1,32,0,65,4,106,40,2,0,4,127,32,1,65,12,119,32,0,65,20,106,40,2,0,65,18,119,106,32,0,65,12,106,40,2,0,65,7,119,106,32,0,65,8,106,40,2,0,65,1,119,106,5,32,1,65,177,207,217,178,1,106,11,32,0,40,2,0,106,32,0,65,24,106,32,0,65,40,106,40,2,0,16,1,11,255,3,2,3,126,1,127,32,0,32,1,106,33,6,32,1,65,32,79,4,126,32,6,65,32,107,33,6,32,2,66,214,235,130,238,234,253,137,245,224,0,124,33,3,32,2,66,177,169,172,193,173,184,212,166,61,125,33,4,32,2,66,249,234,208,208,231,201,161,228,225,0,124,33,5,3,64,32,3,32,0,41,3,0,66,207,214,211,190,210,199,171,217,66,126,124,66,31,137,66,135,149,175,175,152,182,222,155,158,127,126,33,3,32,4,32,0,65,8,106,34,0,41,3,0,66,207,214,211,190,210,199,171,217,66,126,124,66,31,137,66,135,149,175,175,152,182,222,155,158,127,126,33,4,32,2,32,0,65,8,106,34,0,41,3,0,66,207,214,211,190,210,199,171,217,66,126,124,66,31,137,66,135,149,175,175,152,182,222,155,158,127,126,33,2,32,5,32,0,65,8,106,34,0,41,3,0,66,207,214,211,190,210,199,171,217,66,126,124,66,31,137,66,135,149,175,175,152,182,222,155,158,127,126,33,5,32,6,32,0,65,8,106,34,0,79,13,0,11,32,2,66,12,137,32,5,66,18,137,124,32,4,66,7,137,124,32,3,66,1,137,124,32,3,66,207,214,211,190,210,199,171,217,66,126,66,31,137,66,135,149,175,175,152,182,222,155,158,127,126,133,66,135,149,175,175,152,182,222,155,158,127,126,66,157,163,181,234,131,177,141,138,250,0,125,32,4,66,207,214,211,190,210,199,171,217,66,126,66,31,137,66,135,149,175,175,152,182,222,155,158,127,126,133,66,135,149,175,175,152,182,222,155,158,127,126,66,157,163,181,234,131,177,141,138,250,0,125,32,2,66,207,214,211,190,210,199,171,217,66,126,66,31,137,66,135,149,175,175,152,182,222,155,158,127,126,133,66,135,149,175,175,152,182,222,155,158,127,126,66,157,163,181,234,131,177,141,138,250,0,125,32,5,66,207,214,211,190,210,199,171,217,66,126,66,31,137,66,135,149,175,175,152,182,222,155,158,127,126,133,66,135,149,175,175,152,182,222,155,158,127,126,66,157,163,181,234,131,177,141,138,250,0,125,5,32,2,66,197,207,217,178,241,229,186,234,39,124,11,32,1,173,124,32,0,32,1,65,31,113,16,6,11,134,2,0,32,1,32,2,106,33,2,3,64,32,2,32,1,65,8,106,79,4,64,32,1,41,3,0,66,207,214,211,190,210,199,171,217,66,126,66,31,137,66,135,149,175,175,152,182,222,155,158,127,126,32,0,133,66,27,137,66,135,149,175,175,152,182,222,155,158,127,126,66,157,163,181,234,131,177,141,138,250,0,125,33,0,32,1,65,8,106,33,1,12,1,11,11,32,1,65,4,106,32,2,77,4,64,32,0,32,1,53,2,0,66,135,149,175,175,152,182,222,155,158,127,126,133,66,23,137,66,207,214,211,190,210,199,171,217,66,126,66,249,243,221,241,153,246,153,171,22,124,33,0,32,1,65,4,106,33,1,11,3,64,32,1,32,2,73,4,64,32,0,32,1,49,0,0,66,197,207,217,178,241,229,186,234,39,126,133,66,11,137,66,135,149,175,175,152,182,222,155,158,127,126,33,0,32,1,65,1,106,33,1,12,1,11,11,32,0,32,0,66,33,136,133,66,207,214,211,190,210,199,171,217,66,126,34,0,32,0,66,29,136,133,66,249,243,221,241,153,246,153,171,22,126,34,0,32,0,66,32,136,133,11,77,0,32,0,65,8,106,32,1,66,214,235,130,238,234,253,137,245,224,0,124,55,3,0,32,0,65,16,106,32,1,66,177,169,172,193,173,184,212,166,61,125,55,3,0,32,0,65,24,106,32,1,55,3,0,32,0,65,32,106,32,1,66,249,234,208,208,231,201,161,228,225,0,124,55,3,0,11,244,4,2,3,127,4,126,32,1,32,2,106,33,5,32,0,65,40,106,33,4,32,0,65,200,0,106,40,2,0,33,3,32,0,32,0,41,3,0,32,2,173,124,55,3,0,32,2,32,3,106,65,32,73,4,64,32,3,32,4,106,32,1,32,2,252,10,0,0,32,0,65,200,0,106,32,2,32,3,106,54,2,0,15,11,32,3,4,64,32,3,32,4,106,32,1,65,32,32,3,107,34,2,252,10,0,0,32,0,65,8,106,34,3,32,3,41,3,0,32,4,41,3,0,66,207,214,211,190,210,199,171,217,66,126,124,66,31,137,66,135,149,175,175,152,182,222,155,158,127,126,55,3,0,32,0,65,16,106,34,3,32,3,41,3,0,32,4,65,8,106,41,3,0,66,207,214,211,190,210,199,171,217,66,126,124,66,31,137,66,135,149,175,175,152,182,222,155,158,127,126,55,3,0,32,0,65,24,106,34,3,32,3,41,3,0,32,4,65,16,106,41,3,0,66,207,214,211,190,210,199,171,217,66,126,124,66,31,137,66,135,149,175,175,152,182,222,155,158,127,126,55,3,0,32,0,65,32,106,34,3,32,3,41,3,0,32,4,65,24,106,41,3,0,66,207,214,211,190,210,199,171,217,66,126,124,66,31,137,66,135,149,175,175,152,182,222,155,158,127,126,55,3,0,32,0,65,200,0,106,65,0,54,2,0,32,1,32,2,106,33,1,11,32,1,65,32,106,32,5,77,4,64,32,5,65,32,107,33,2,32,0,65,8,106,41,3,0,33,6,32,0,65,16,106,41,3,0,33,7,32,0,65,24,106,41,3,0,33,8,32,0,65,32,106,41,3,0,33,9,3,64,32,6,32,1,41,3,0,66,207,214,211,190,210,199,171,217,66,126,124,66,31,137,66,135,149,175,175,152,182,222,155,158,127,126,33,6,32,7,32,1,65,8,106,34,1,41,3,0,66,207,214,211,190,210,199,171,217,66,126,124,66,31,137,66,135,149,175,175,152,182,222,155,158,127,126,33,7,32,8,32,1,65,8,106,34,1,41,3,0,66,207,214,211,190,210,199,171,217,66,126,124,66,31,137,66,135,149,175,175,152,182,222,155,158,127,126,33,8,32,9,32,1,65,8,106,34,1,41,3,0,66,207,214,211,190,210,199,171,217,66,126,124,66,31,137,66,135,149,175,175,152,182,222,155,158,127,126,33,9,32,2,32,1,65,8,106,34,1,79,13,0,11,32,0,65,8,106,32,6,55,3,0,32,0,65,16,106,32,7,55,3,0,32,0,65,24,106,32,8,55,3,0,32,0,65,32,106,32,9,55,3,0,11,32,1,32,5,73,4,64,32,4,32,1,32,5,32,1,107,34,1,252,10,0,0,32,0,65,200,0,106,32,1,54,2,0,11,11,188,2,1,5,126,32,0,65,24,106,41,3,0,33,1,32,0,41,3,0,34,2,66,32,90,4,126,32,0,65,8,106,41,3,0,34,3,66,1,137,32,0,65,16,106,41,3,0,34,4,66,7,137,124,32,1,66,12,137,32,0,65,32,106,41,3,0,34,5,66,18,137,124,124,32,3,66,207,214,211,190,210,199,171,217,66,126,66,31,137,66,135,149,175,175,152,182,222,155,158,127,126,133,66,135,149,175,175,152,182,222,155,158,127,126,66,157,163,181,234,131,177,141,138,250,0,125,32,4,66,207,214,211,190,210,199,171,217,66,126,66,31,137,66,135,149,175,175,152,182,222,155,158,127,126,133,66,135,149,175,175,152,182,222,155,158,127,126,66,157,163,181,234,131,177,141,138,250,0,125,32,1,66,207,214,211,190,210,199,171,217,66,126,66,31,137,66,135,149,175,175,152,182,222,155,158,127,126,133,66,135,149,175,175,152,182,222,155,158,127,126,66,157,163,181,234,131,177,141,138,250,0,125,32,5,66,207,214,211,190,210,199,171,217,66,126,66,31,137,66,135,149,175,175,152,182,222,155,158,127,126,133,66,135,149,175,175,152,182,222,155,158,127,126,66,157,163,181,234,131,177,141,138,250,0,125,5,32,1,66,197,207,217,178,241,229,186,234,39,124,11,32,2,124,32,0,65,40,106,32,2,66,31,131,167,16,6,11]);async function Mn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Ze(t,"fs"),r=Ze(t,"chunkSize");if(Ne(r)||(r=67108864),r=Fe(r),!Qn(e,{fs:n}))return Promise.reject("fp is not a file");let i=pt();try{let{create64:t}=await async function(){return function(e){const{exports:{mem:t,xxh32:n,xxh64:r,init32:i,update32:o,digest32:c,init64:u,update64:l,digest64:a}}=e;let s=new Uint8Array(t.buffer);function d(e,n){if(t.buffer.byteLength<e+n){const r=Math.ceil((e+n-t.buffer.byteLength)/65536);t.grow(r),s=new Uint8Array(t.buffer)}}function f(e,t,n,r,i,o){d(e);const c=new Uint8Array(e);return s.set(c),n(0,t),c.set(s.subarray(0,e)),{update(t){let n;return s.set(c),"string"==typeof t?(d(3*t.length,e),n=h.encodeInto(t,s.subarray(e)).written):(d(t.byteLength,e),s.set(t,e),n=t.byteLength),r(0,e,n),c.set(s.subarray(0,e)),this},digest:()=>(s.set(c),o(i(0)))}}function p(e){return e>>>0}const g=2n**64n-1n;function I(e){return e&g}const h=new TextEncoder,y=0,m=0n;function b(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y;return d(3*e.length,0),p(n(0,h.encodeInto(e,s).written,t))}function C(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m;return d(3*e.length,0),I(r(0,h.encodeInto(e,s).written,t))}return{h32:b,h32ToString:function(e){return b(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:y).toString(16).padStart(8,"0")},h32Raw:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y;return d(e.byteLength,0),s.set(e),p(n(0,e.byteLength,t))},create32:function(){return f(48,arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,i,o,c,p)},h64:C,h64ToString:function(e){return C(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:m).toString(16).padStart(16,"0")},h64Raw:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m;return d(e.byteLength,0),s.set(e),I(r(0,e.byteLength,t))},create64:function(){return f(88,arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,u,l,a,I)}}}((await WebAssembly.instantiate(zn)).instance)}(),o=t(),c=n.createReadStream(e,{highWaterMark:r});c.on("data",(e=>{o.update(e)})),c.on("end",(()=>{let e=o.digest().toString(16).padStart(16,"0");i.resolve(e)})),c.on("error",i.reject)}catch(e){i.reject(e.toString())}return i}function _n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dn(e){return Mn(e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_n(Object(n),!0).forEach((function(t){Un(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_n(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({fs:r,crypto:o},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}var En={};!function(e,t){e.exports=function(e){var t={};!function(t,n){t.exports=function(e){var t={};!function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,c){if("function"!=typeof r)throw new TypeError("The listener must be a function");var u=new i(r,o||e,c),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],u]:e._events[l].push(u):(e._events[l]=u,e._eventsCount++),e}function c(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function u(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),u.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},u.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,c=new Array(o);i<o;i++)c[i]=r[i].fn;return c},u.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},u.prototype.emit=function(e,t,r,i,o,c){var u=n?n+e:e;if(!this._events[u])return!1;var l,a,s=this._events[u],d=arguments.length;if(s.fn){switch(s.once&&this.removeListener(e,s.fn,void 0,!0),d){case 1:return s.fn.call(s.context),!0;case 2:return s.fn.call(s.context,t),!0;case 3:return s.fn.call(s.context,t,r),!0;case 4:return s.fn.call(s.context,t,r,i),!0;case 5:return s.fn.call(s.context,t,r,i,o),!0;case 6:return s.fn.call(s.context,t,r,i,o,c),!0}for(a=1,l=new Array(d-1);a<d;a++)l[a-1]=arguments[a];s.fn.apply(s.context,l)}else{var f,p=s.length;for(a=0;a<p;a++)switch(s[a].once&&this.removeListener(e,s[a].fn,void 0,!0),d){case 1:s[a].fn.call(s[a].context);break;case 2:s[a].fn.call(s[a].context,t);break;case 3:s[a].fn.call(s[a].context,t,r);break;case 4:s[a].fn.call(s[a].context,t,r,i);break;default:if(!l)for(f=1,l=new Array(d-1);f<d;f++)l[f-1]=arguments[f];s[a].fn.apply(s[a].context,l)}}return!0},u.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},u.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},u.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return c(this,o),this;var u=this._events[o];if(u.fn)u.fn!==t||i&&!u.once||r&&u.context!==r||c(this,o);else{for(var l=0,a=[],s=u.length;l<s;l++)(u[l].fn!==t||i&&!u[l].once||r&&u[l].context!==r)&&a.push(u[l]);a.length?this._events[o]=1===a.length?a[0]:a:c(this,o)}return this},u.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&c(this,t)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,e.exports=u}({get exports(){return t},set exports(e){t=e}});var n=t;let r;!function(){if("nodejs"!=("undefined"!=typeof window&&void 0!==window.document?"browser":"nodejs"))return null;let t=(i="CgogICAgICAgIC8vaW1wb3J0IHsgcGFyZW50UG9ydCB9IGZyb20gJ3dvcmtlcl90aHJlYWRzJwogICAgICAgIGxldCB7IHBhcmVudFBvcnQgfSA9IHJlcXVpcmUoJ3dvcmtlcl90aHJlYWRzJykgLy/lm6BwYWNrYWdlLmpzb27kuI3ntaZ0eXBlPW1vZHVsZeaVheeEoeazleaUr+aPtGVzNiBpbXBvcnQsIOW+l+S9v+eUqHJlcXVpcmUKICAgICAgICAvL+iLpeimgeaWvG5vZGVqcyB3b3JrZXLlhafkvb/nlKjnhKHms5Xnt6jora/nmoTljp/nlJ/lpZfku7bkvovlpoJmcywg6YG/5YWN5L2/55So6aCC5bGkaW1wb3J05Yqg6LyJ5L2/55SoLCDlm6DnhKHms5Xnt6jora/mnIPnm7TmjqXkv53nlZkKICAgICAgICAvL+S4puWboGltcG9ydOS9jeaWvHdvcmtlcuWkluWxpOmZkOWumueCunJlcXVpcmXljYAocGFja2FnZS5qc29u5LiN57WmdHlwZT1tb2R1bGUpLCDmlYXlh7rnj77pjK/oqqTnhKHms5Xnt6jora8KICAgICAgICAKCiJ1c2Ugc3RyaWN0Ijt2YXIgdD1yZXF1aXJlKCJwYXRoIikscj1yZXF1aXJlKCJmcyIpLGU9QXJyYXkuaXNBcnJheSxuPSJvYmplY3QiPT10eXBlb2YgZ2xvYmFsJiZnbG9iYWwmJmdsb2JhbC5PYmplY3Q9PT1PYmplY3QmJmdsb2JhbCxvPSJvYmplY3QiPT10eXBlb2Ygc2VsZiYmc2VsZiYmc2VsZi5PYmplY3Q9PT1PYmplY3QmJnNlbGYsaT1ufHxvfHxGdW5jdGlvbigicmV0dXJuIHRoaXMiKSgpLHU9aS5TeW1ib2wsYT1PYmplY3QucHJvdG90eXBlLGM9YS5oYXNPd25Qcm9wZXJ0eSxzPWEudG9TdHJpbmcsZj11P3UudG9TdHJpbmdUYWc6dm9pZCAwO3ZhciBsPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7dmFyIHA9IltvYmplY3QgTnVsbF0iLGg9IltvYmplY3QgVW5kZWZpbmVkXSIseT11P3UudG9TdHJpbmdUYWc6dm9pZCAwO2Z1bmN0aW9uIHYodCl7cmV0dXJuIG51bGw9PXQ/dm9pZCAwPT09dD9oOnA6eSYmeSBpbiBPYmplY3QodCk/ZnVuY3Rpb24odCl7dmFyIHI9Yy5jYWxsKHQsZiksZT10W2ZdO3RyeXt0W2ZdPXZvaWQgMDt2YXIgbj0hMH1jYXRjaCh0KXt9dmFyIG89cy5jYWxsKHQpO3JldHVybiBuJiYocj90W2ZdPWU6ZGVsZXRlIHRbZl0pLG99KHQpOmZ1bmN0aW9uKHQpe3JldHVybiBsLmNhbGwodCl9KHQpfXZhciBfPSJbb2JqZWN0IFN5bWJvbF0iO2Z1bmN0aW9uIGQodCl7cmV0dXJuInN5bWJvbCI9PXR5cGVvZiB0fHxmdW5jdGlvbih0KXtyZXR1cm4gbnVsbCE9dCYmIm9iamVjdCI9PXR5cGVvZiB0fSh0KSYmdih0KT09X312YXIgYj0vXC58XFsoPzpbXltcXV0qfChbIiddKSg/Oig/IVwxKVteXFxdfFxcLikqP1wxKVxdLyxnPS9eXHcqJC87ZnVuY3Rpb24gaih0KXt2YXIgcj10eXBlb2YgdDtyZXR1cm4gbnVsbCE9dCYmKCJvYmplY3QiPT1yfHwiZnVuY3Rpb24iPT1yKX12YXIgUz0iW29iamVjdCBBc3luY0Z1bmN0aW9uXSIsTz0iW29iamVjdCBGdW5jdGlvbl0iLG09IltvYmplY3QgR2VuZXJhdG9yRnVuY3Rpb25dIix3PSJbb2JqZWN0IFByb3h5XSI7dmFyICQseD1pWyJfX2NvcmUtanNfc2hhcmVkX18iXSxSPSgkPS9bXi5dKyQvLmV4ZWMoeCYmeC5rZXlzJiZ4LmtleXMuSUVfUFJPVE98fCIiKSk/IlN5bWJvbChzcmMpXzEuIiskOiIiO3ZhciB6PUZ1bmN0aW9uLnByb3RvdHlwZS50b1N0cmluZzt2YXIgQT0vXlxbb2JqZWN0IC4rP0NvbnN0cnVjdG9yXF0kLyxGPUZ1bmN0aW9uLnByb3RvdHlwZSxOPU9iamVjdC5wcm90b3R5cGUsUD1GLnRvU3RyaW5nLGs9Ti5oYXNPd25Qcm9wZXJ0eSxFPVJlZ0V4cCgiXiIrUC5jYWxsKGspLnJlcGxhY2UoL1tcXF4kLiorPygpW1xde318XS9nLCJcXCQmIikucmVwbGFjZSgvaGFzT3duUHJvcGVydHl8KGZ1bmN0aW9uKS4qPyg/PVxcXCgpfCBmb3IgLis/KD89XFxcXSkvZywiJDEuKj8iKSsiJCIpO2Z1bmN0aW9uIEModCl7aWYoIWoodCl8fChyPXQsUiYmUiBpbiByKSlyZXR1cm4hMTt2YXIgcixlPWZ1bmN0aW9uKHQpe2lmKCFqKHQpKXJldHVybiExO3ZhciByPXYodCk7cmV0dXJuIHI9PU98fHI9PW18fHI9PVN8fHI9PXd9KHQpP0U6QTtyZXR1cm4gZS50ZXN0KGZ1bmN0aW9uKHQpe2lmKG51bGwhPXQpe3RyeXtyZXR1cm4gei5jYWxsKHQpfWNhdGNoKHQpe310cnl7cmV0dXJuIHQrIiJ9Y2F0Y2godCl7fX1yZXR1cm4iIn0odCkpfWZ1bmN0aW9uIEkodCxyKXt2YXIgZT1mdW5jdGlvbih0LHIpe3JldHVybiBudWxsPT10P3ZvaWQgMDp0W3JdfSh0LHIpO3JldHVybiBDKGUpP2U6dm9pZCAwfXZhciBUPUkoT2JqZWN0LCJjcmVhdGUiKTt2YXIgTT1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O3ZhciBxPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7ZnVuY3Rpb24gTCh0KXt2YXIgcj0tMSxlPW51bGw9PXQ/MDp0Lmxlbmd0aDtmb3IodGhpcy5jbGVhcigpOysrcjxlOyl7dmFyIG49dFtyXTt0aGlzLnNldChuWzBdLG5bMV0pfX1mdW5jdGlvbiBVKHQscil7Zm9yKHZhciBlLG4sbz10Lmxlbmd0aDtvLS07KWlmKChlPXRbb11bMF0pPT09KG49cil8fGUhPWUmJm4hPW4pcmV0dXJuIG87cmV0dXJuLTF9TC5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLl9fZGF0YV9fPVQ/VChudWxsKTp7fSx0aGlzLnNpemU9MH0sTC5wcm90b3R5cGUuZGVsZXRlPWZ1bmN0aW9uKHQpe3ZhciByPXRoaXMuaGFzKHQpJiZkZWxldGUgdGhpcy5fX2RhdGFfX1t0XTtyZXR1cm4gdGhpcy5zaXplLT1yPzE6MCxyfSxMLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24odCl7dmFyIHI9dGhpcy5fX2RhdGFfXztpZihUKXt2YXIgZT1yW3RdO3JldHVybiJfX2xvZGFzaF9oYXNoX3VuZGVmaW5lZF9fIj09PWU/dm9pZCAwOmV9cmV0dXJuIE0uY2FsbChyLHQpP3JbdF06dm9pZCAwfSxMLnByb3RvdHlwZS5oYXM9ZnVuY3Rpb24odCl7dmFyIHI9dGhpcy5fX2RhdGFfXztyZXR1cm4gVD92b2lkIDAhPT1yW3RdOnEuY2FsbChyLHQpfSxMLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCxyKXt2YXIgZT10aGlzLl9fZGF0YV9fO3JldHVybiB0aGlzLnNpemUrPXRoaXMuaGFzKHQpPzA6MSxlW3RdPVQmJnZvaWQgMD09PXI/Il9fbG9kYXNoX2hhc2hfdW5kZWZpbmVkX18iOnIsdGhpc307dmFyIEQ9QXJyYXkucHJvdG90eXBlLnNwbGljZTtmdW5jdGlvbiBHKHQpe3ZhciByPS0xLGU9bnVsbD09dD8wOnQubGVuZ3RoO2Zvcih0aGlzLmNsZWFyKCk7KytyPGU7KXt2YXIgbj10W3JdO3RoaXMuc2V0KG5bMF0sblsxXSl9fUcucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy5fX2RhdGFfXz1bXSx0aGlzLnNpemU9MH0sRy5wcm90b3R5cGUuZGVsZXRlPWZ1bmN0aW9uKHQpe3ZhciByPXRoaXMuX19kYXRhX18sZT1VKHIsdCk7cmV0dXJuIShlPDApJiYoZT09ci5sZW5ndGgtMT9yLnBvcCgpOkQuY2FsbChyLGUsMSksLS10aGlzLnNpemUsITApfSxHLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24odCl7dmFyIHI9dGhpcy5fX2RhdGFfXyxlPVUocix0KTtyZXR1cm4gZTwwP3ZvaWQgMDpyW2VdWzFdfSxHLnByb3RvdHlwZS5oYXM9ZnVuY3Rpb24odCl7cmV0dXJuIFUodGhpcy5fX2RhdGFfXyx0KT4tMX0sRy5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQscil7dmFyIGU9dGhpcy5fX2RhdGFfXyxuPVUoZSx0KTtyZXR1cm4gbjwwPygrK3RoaXMuc2l6ZSxlLnB1c2goW3Qscl0pKTplW25dWzFdPXIsdGhpc307dmFyIFc9SShpLCJNYXAiKTtmdW5jdGlvbiBCKHQscil7dmFyIGUsbixvPXQuX19kYXRhX187cmV0dXJuKCJzdHJpbmciPT0obj10eXBlb2YoZT1yKSl8fCJudW1iZXIiPT1ufHwic3ltYm9sIj09bnx8ImJvb2xlYW4iPT1uPyJfX3Byb3RvX18iIT09ZTpudWxsPT09ZSk/b1sic3RyaW5nIj09dHlwZW9mIHI/InN0cmluZyI6Imhhc2giXTpvLm1hcH1mdW5jdGlvbiBIKHQpe3ZhciByPS0xLGU9bnVsbD09dD8wOnQubGVuZ3RoO2Zvcih0aGlzLmNsZWFyKCk7KytyPGU7KXt2YXIgbj10W3JdO3RoaXMuc2V0KG5bMF0sblsxXSl9fUgucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy5zaXplPTAsdGhpcy5fX2RhdGFfXz17aGFzaDpuZXcgTCxtYXA6bmV3KFd8fEcpLHN0cmluZzpuZXcgTH19LEgucHJvdG90eXBlLmRlbGV0ZT1mdW5jdGlvbih0KXt2YXIgcj1CKHRoaXMsdCkuZGVsZXRlKHQpO3JldHVybiB0aGlzLnNpemUtPXI/MTowLHJ9LEgucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXtyZXR1cm4gQih0aGlzLHQpLmdldCh0KX0sSC5wcm90b3R5cGUuaGFzPWZ1bmN0aW9uKHQpe3JldHVybiBCKHRoaXMsdCkuaGFzKHQpfSxILnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCxyKXt2YXIgZT1CKHRoaXMsdCksbj1lLnNpemU7cmV0dXJuIGUuc2V0KHQsciksdGhpcy5zaXplKz1lLnNpemU9PW4/MDoxLHRoaXN9O3ZhciBKPSJFeHBlY3RlZCBhIGZ1bmN0aW9uIjtmdW5jdGlvbiBLKHQscil7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHR8fG51bGwhPXImJiJmdW5jdGlvbiIhPXR5cGVvZiByKXRocm93IG5ldyBUeXBlRXJyb3IoSik7dmFyIGU9ZnVuY3Rpb24oKXt2YXIgbj1hcmd1bWVudHMsbz1yP3IuYXBwbHkodGhpcyxuKTpuWzBdLGk9ZS5jYWNoZTtpZihpLmhhcyhvKSlyZXR1cm4gaS5nZXQobyk7dmFyIHU9dC5hcHBseSh0aGlzLG4pO3JldHVybiBlLmNhY2hlPWkuc2V0KG8sdSl8fGksdX07cmV0dXJuIGUuY2FjaGU9bmV3KEsuQ2FjaGV8fEgpLGV9Sy5DYWNoZT1IO3ZhciBRLFYsWCxZPS9bXi5bXF1dK3xcWyg/OigtP1xkKyg/OlwuXGQrKT8pfChbIiddKSgoPzooPyFcMilbXlxcXXxcXC4pKj8pXDIpXF18KD89KD86XC58XFtcXSkoPzpcLnxcW1xdfCQpKS9nLFo9L1xcKFxcKT8vZyx0dD0oUT1mdW5jdGlvbih0KXt2YXIgcj1bXTtyZXR1cm4gNDY9PT10LmNoYXJDb2RlQXQoMCkmJnIucHVzaCgiIiksdC5yZXBsYWNlKFksKGZ1bmN0aW9uKHQsZSxuLG8pe3IucHVzaChuP28ucmVwbGFjZShaLCIkMSIpOmV8fHQpfSkpLHJ9LFY9SyhRLChmdW5jdGlvbih0KXtyZXR1cm4gNTAwPT09WC5zaXplJiZYLmNsZWFyKCksdH0pKSxYPVYuY2FjaGUsVikscnQ9dHQ7dmFyIGV0PTEvMCxudD11P3UucHJvdG90eXBlOnZvaWQgMCxvdD1udD9udC50b1N0cmluZzp2b2lkIDA7ZnVuY3Rpb24gaXQodCl7aWYoInN0cmluZyI9PXR5cGVvZiB0KXJldHVybiB0O2lmKGUodCkpcmV0dXJuIGZ1bmN0aW9uKHQscil7Zm9yKHZhciBlPS0xLG49bnVsbD09dD8wOnQubGVuZ3RoLG89QXJyYXkobik7KytlPG47KW9bZV09cih0W2VdLGUsdCk7cmV0dXJuIG99KHQsaXQpKyIiO2lmKGQodCkpcmV0dXJuIG90P290LmNhbGwodCk6IiI7dmFyIHI9dCsiIjtyZXR1cm4iMCI9PXImJjEvdD09LWV0PyItMCI6cn1mdW5jdGlvbiB1dCh0KXtyZXR1cm4gbnVsbD09dD8iIjppdCh0KX1mdW5jdGlvbiBhdCh0LHIpe3JldHVybiBlKHQpP3Q6ZnVuY3Rpb24odCxyKXtpZihlKHQpKXJldHVybiExO3ZhciBuPXR5cGVvZiB0O3JldHVybiEoIm51bWJlciIhPW4mJiJzeW1ib2wiIT1uJiYiYm9vbGVhbiIhPW4mJm51bGwhPXQmJiFkKHQpKXx8Zy50ZXN0KHQpfHwhYi50ZXN0KHQpfHxudWxsIT1yJiZ0IGluIE9iamVjdChyKX0odCxyKT9bdF06cnQodXQodCkpfXZhciBjdD0xLzA7ZnVuY3Rpb24gc3QodCl7aWYoInN0cmluZyI9PXR5cGVvZiB0fHxkKHQpKXJldHVybiB0O3ZhciByPXQrIiI7cmV0dXJuIjAiPT1yJiYxL3Q9PS1jdD8iLTAiOnJ9ZnVuY3Rpb24gZnQodCxyLGUpe3ZhciBuPW51bGw9PXQ/dm9pZCAwOmZ1bmN0aW9uKHQscil7Zm9yKHZhciBlPTAsbj0ocj1hdChyLHQpKS5sZW5ndGg7bnVsbCE9dCYmZTxuOyl0PXRbc3QocltlKytdKV07cmV0dXJuIGUmJmU9PW4/dDp2b2lkIDB9KHQscik7cmV0dXJuIHZvaWQgMD09PW4/ZTpufWZ1bmN0aW9uIGx0KCl7bGV0IHQscixlPW5ldyBQcm9taXNlKChmdW5jdGlvbigpe3Q9YXJndW1lbnRzWzBdLHI9YXJndW1lbnRzWzFdfSkpO3JldHVybiBlLnJlc29sdmU9dCxlLnJlamVjdD1yLGV9ZnVuY3Rpb24gcHQodCl7cmV0dXJuIltvYmplY3QgQXJyYXldIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KX1mdW5jdGlvbiBodCh0KXtpZihmdW5jdGlvbih0KXtyZXR1cm4iW29iamVjdCBPYmplY3RdIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KX0odCkpe2ZvcihsZXQgciBpbiB0KXJldHVybiExO3JldHVybiEwfXJldHVybiExfWZ1bmN0aW9uIHl0KHQpe3JldHVybiJbb2JqZWN0IFN0cmluZ10iPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpfWZ1bmN0aW9uIHZ0KHQpe3JldHVybiB0IT10fWZ1bmN0aW9uIF90KHQpe3JldHVybiEhZnVuY3Rpb24odCl7cmV0dXJuIltvYmplY3QgVW5kZWZpbmVkXSI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCl9KHQpfHwoISFmdW5jdGlvbih0KXtyZXR1cm4iW29iamVjdCBOdWxsXSI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCl9KHQpfHwoISFodCh0KXx8KCEhZnVuY3Rpb24odCl7cmV0dXJuISgheXQodCl8fCIiIT09dCl9KHQpfHwoISFmdW5jdGlvbih0KXtyZXR1cm4hIXB0KHQpJiYwPT09dC5sZW5ndGh9KHQpfHwhIXZ0KHQpKSkpKX1mdW5jdGlvbiBkdCh0KXtyZXR1cm4hKCF5dCh0KXx8IiI9PT10KX12YXIgYnQ9L1xzLzt2YXIgZ3Q9L15ccysvO2Z1bmN0aW9uIGp0KHQpe3JldHVybiB0P3Quc2xpY2UoMCxmdW5jdGlvbih0KXtmb3IodmFyIHI9dC5sZW5ndGg7ci0tJiZidC50ZXN0KHQuY2hhckF0KHIpKTspO3JldHVybiByfSh0KSsxKS5yZXBsYWNlKGd0LCIiKTp0fXZhciBTdD1OYU4sT3Q9L15bLStdMHhbMC05YS1mXSskL2ksbXQ9L14wYlswMV0rJC9pLHd0PS9eMG9bMC03XSskL2ksJHQ9cGFyc2VJbnQ7ZnVuY3Rpb24geHQodCl7aWYoIm51bWJlciI9PXR5cGVvZiB0KXJldHVybiB0O2lmKGQodCkpcmV0dXJuIFN0O2lmKGoodCkpe3ZhciByPSJmdW5jdGlvbiI9PXR5cGVvZiB0LnZhbHVlT2Y/dC52YWx1ZU9mKCk6dDt0PWoocik/cisiIjpyfWlmKCJzdHJpbmciIT10eXBlb2YgdClyZXR1cm4gMD09PXQ/dDordDt0PWp0KHQpO3ZhciBlPW10LnRlc3QodCk7cmV0dXJuIGV8fHd0LnRlc3QodCk/JHQodC5zbGljZSgyKSxlPzI6OCk6T3QudGVzdCh0KT9TdDordH12YXIgUnQ9MS8wLHp0PTE3OTc2OTMxMzQ4NjIzMTU3ZTI5MjtmdW5jdGlvbiBBdCh0KXtyZXR1cm4gdD8odD14dCh0KSk9PT1SdHx8dD09PS1SdD8odDwwPy0xOjEpKnp0OnQ9PXQ/dDowOjA9PT10P3Q6MH1mdW5jdGlvbiBGdCh0KXt2YXIgcj1BdCh0KSxlPXIlMTtyZXR1cm4gcj09cj9lP3ItZTpyOjB9ZnVuY3Rpb24gTnQodCl7bGV0IHI9ITE7aWYoZHQodCkpcj0haXNOYU4oTnVtYmVyKHQpKTtlbHNlIGlmKGZ1bmN0aW9uKHQpe3JldHVybiJbb2JqZWN0IE51bWJlcl0iPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpfSh0KSl7aWYodnQodCkpcmV0dXJuITE7cj0hMH1yZXR1cm4gcn1mdW5jdGlvbiBQdCh0KXtpZighTnQodCkpcmV0dXJuIDA7cmV0dXJuIEF0KHQpfWZ1bmN0aW9uIGt0KHQpe3JldHVybiEhTnQodCkmJih0PVB0KHQpLCJudW1iZXIiPT10eXBlb2Yocj10KSYmcj09RnQocikpO3ZhciByfXZhciBFdD1pLmlzRmluaXRlLEN0PU1hdGgubWluO3ZhciBJdD1mdW5jdGlvbih0KXt2YXIgcj1NYXRoW3RdO3JldHVybiBmdW5jdGlvbih0LGUpe2lmKHQ9eHQodCksKGU9bnVsbD09ZT8wOkN0KEZ0KGUpLDI5MikpJiZFdCh0KSl7dmFyIG49KHV0KHQpKyJlIikuc3BsaXQoImUiKTtyZXR1cm4rKChuPSh1dChyKG5bMF0rImUiKygrblsxXStlKSkpKyJlIikuc3BsaXQoImUiKSlbMF0rImUiKygrblsxXS1lKSl9cmV0dXJuIHIodCl9fSgicm91bmQiKSxUdD1JdDtmdW5jdGlvbiBNdCh0KXtpZighTnQodCkpcmV0dXJuIDA7dD1QdCh0KTtsZXQgcj1UdCh0KTtyZXR1cm4iMCI9PT1TdHJpbmcocik/MDpyfWZ1bmN0aW9uIHF0KHQpe2lmKCFrdCh0KSlyZXR1cm4hMTtyZXR1cm4gTXQodCk+PTB9ZnVuY3Rpb24gTHQodCxyKXtpZighZHQodCkpcmV0dXJuIiI7aWYoIXF0KHIpKXJldHVybiIiO2lmKDA9PT0ocj1NdChyKSkpcmV0dXJuIiI7bGV0IGU9dC5sZW5ndGgtcjtyZXR1cm4gZTwwJiYoZT0wKSx0LnN1YnN0cmluZyhlLGUrcil9ZnVuY3Rpb24gVXQodCxyKXtyZXR1cm4gZHQodCkmJnF0KHIpPzA9PT0ocj1NdChyKSk/dDpmdW5jdGlvbih0LHIpe3JldHVybiBkdCh0KSYmcXQocik/MD09PShyPU10KHIpKT8iIjp0LnN1YnN0cmluZygwLHIpOiIifSh0LHQubGVuZ3RoLXIpOiIifWZ1bmN0aW9uIER0KHQpe2lmKCFkdCh0KSlyZXR1cm57cGF0aDoiIixpc1Jvb3Q6ITF9O2Zvcig7dC5pbmRleE9mKCJcXFxcIik+PTA7KXQ9dC5yZXBsYWNlKCJcXFxcIiwiXFwiKTtmb3IoO3QuaW5kZXhPZigiLy8iKT49MDspdD10LnJlcGxhY2UoIi8vIiwiLyIpO2lmKCI6Ij09PUx0KHQsMSkpcmV0dXJue3BhdGg6YCR7dH1cXGAsaXNSb290OiEwfTtpZigiXFwiPT09THQodCwxKSl7bGV0IHI9VXQodCwxKTtyZXR1cm4iOiI9PT1MdChyLDEpP3twYXRoOnQsaXNSb290OiEwfTp7cGF0aDpyLGlzUm9vdDohMX19aWYoIi8iPT09THQodCwxKSl7bGV0IHI9VXQodCwxKTtyZXR1cm4gMD09PXIubGVuZ3RoP3twYXRoOnQsaXNSb290OiEwfTp7cGF0aDpyLGlzUm9vdDohMX19cmV0dXJue3BhdGg6dCxpc1Jvb3Q6ITF9fWZ1bmN0aW9uIEd0KHQpe2lmKCFkdCh0KSlyZXR1cm4iIjtsZXQgcj1EdCh0KTtpZihyLmlzUm9vdClyZXR1cm4gci5wYXRoO2xldCBlPWZ1bmN0aW9uKHQpe2lmKCFkdCh0KSlyZXR1cm4iIjtsZXQgcj1EdCh0KTtpZihyLmlzUm9vdClyZXR1cm4gci5wYXRoO2xldCBlPXIucGF0aDt0cnl7ZT1lLnNwbGl0KCJcXCIpLnBvcCgpLnNwbGl0KCIvIikucG9wKCl9Y2F0Y2godCl7fXJldHVybiBlfSh0PXIucGF0aCk7aWYoIWR0KGUpKXJldHVybiB0O2xldCBuPUR0KHQ9VXQodCxlLmxlbmd0aCkpO3JldHVybiBuLmlzUm9vdCxuLnBhdGh9ZnVuY3Rpb24gV3QodCxyPXt9KXtsZXQgZT1mdChyLCJmcyIpO2lmKCFlLmV4aXN0c1N5bmModCkpcmV0dXJuITE7bGV0IG49ZS5sc3RhdFN5bmModCk7cmV0dXJuIW4uaXNGaWxlKCkmJiFuLmlzU3ltYm9saWNMaW5rKCl9ZnVuY3Rpb24gQnQodCxyPXt9KXtsZXQgZT1mdChyLCJmcyIpO3JldHVybiEhZS5leGlzdHNTeW5jKHQpJiYoIWUubHN0YXRTeW5jKHQpLmlzRGlyZWN0b3J5KCkmJiFlLmxzdGF0U3luYyh0KS5pc1N5bWJvbGljTGluaygpKX1mdW5jdGlvbiBIdCh0LHI9e30pe2xldCBlPWZ0KHIsImZzIik7aWYoIWUuZXhpc3RzU3luYyh0KSlyZXR1cm57c3VjY2VzczoiZmlsZSBkb2VzIG5vdCBleGlzdDogIit0fTtpZighQnQodCx7ZnM6ZX0pKXJldHVybntlcnJvcjoiaW5wdXQgcGF0aCBpcyBub3QgYSBmaWxlOiAiK3R9O3RyeXtlLnVubGlua1N5bmModCl9Y2F0Y2godCl7cmV0dXJue2Vycm9yOnR9fXJldHVybntzdWNjZXNzOiJkb25lOiAiK3R9fWFzeW5jIGZ1bmN0aW9uIEp0KHQscixlLG49e30pe2xldCBvPSIiLGk9ZnQobiwiZnMiKTtpZighcHQodT1yKXx8MD09PXUubGVuZ3RofHwxPT09dS5sZW5ndGgmJl90KHVbMF0pKXRocm93IG5ldyBFcnJvcigiZnBzSW4gaW4gbm90IGFuIGVmZmVjdGl2ZSBhcnJheSIpO3ZhciB1O2xldCBhPUd0KGUpO1d0KGEse2ZzOml9KXx8ZnVuY3Rpb24odCxyPXt9KXtsZXQgZT1mdChyLCJmcyIpO2lmKFd0KHQse2ZzOmV9KSlyZXR1cm57c3VjY2VzczoiaW5wdXQgZm9sZGVyIGlzIGFscmVhZHkgZXhpc3RzOiAiK3R9O2lmKGUuZXhpc3RzU3luYyh0KSlyZXR1cm57ZXJyb3I6ImlucHV0IHBhdGggYWxyZWFkeSBleGlzdHM6ICIrdH07dHJ5e2UubWtkaXJTeW5jKHQse3JlY3Vyc2l2ZTohMH0pfWNhdGNoKHQpe3JldHVybntlcnJvcjp0fX19KGEse2ZzOml9KTtsZXQgYz1sdCgpO3RyeXtsZXQgbj1pLmNyZWF0ZVdyaXRlU3RyZWFtKGUpO2ZvcihsZXQgdD0wO3Q8ci5sZW5ndGg7dCsrKXtsZXQgZT1yW3RdO2lmKCFCdChlLHtmczppfSkpdGhyb3cgbmV3IEVycm9yKGBmcEluWyR7ZX1dIGlzIG5vdCBhIGZpbGVgKTtsZXQgdT0oKT0+e2xldCB0PWx0KCkscj1pLmNyZWF0ZVJlYWRTdHJlYW0oZSk7cmV0dXJuIHIub24oImVycm9yIiwocj0+e289ci5tZXNzYWdlLHQucmVqZWN0KHIpfSkpLHIub24oImVuZCIsKCgpPT57SHQoZSx7ZnM6aX0pLHQucmVzb2x2ZSgpfSkpLHIucGlwZShuLHtlbmQ6ITF9KSx0fTthd2FpdCB1KCl9bi5lbmQoKSxuLm9uKCJlcnJvciIsKHQ9PntvPXQubWVzc2FnZSxjLnJlamVjdChvKX0pKSxuLm9uKCJmaW5pc2giLCgoKT0+e2xldCByPXtmaWxlbmFtZTp0LHBhdGg6ZX07Yy5yZXNvbHZlKHIpfSkpfWNhdGNoKHQpe289dC5tZXNzYWdlLGMucmVqZWN0KG8pfXJldHVybiBjfWxldCBtZXJnZUZpbGVzPWFzeW5jKGUsbixvLGkpPT57bGV0IHU9W107Zm9yKGxldCByPTA7cjxvO3IrKyl7bGV0IG89dC5qb2luKGUsYCR7bn1fJHtyfWApO3UucHVzaChvKX1sZXQgYT10LmpvaW4oZSxuKSxjPWF3YWl0IGFzeW5jIGZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gSnQodCxlLG4se2ZzOnJ9KX0oaSx1LGEpO3JldHVybiBjfTsKCgpsZXQgaW5zdGFuY2UgPSBudWxsCmZ1bmN0aW9uIGluaXQoaW5wdXQpewoKICAgIC8vaW5pdAogICAgbGV0IHIKICAgIAogICAgICAgIHIgPSB7CiAgICAgICAgICAgIG1haW46IG1lcmdlRmlsZXMKICAgICAgICB9CiAgICAgICAgCgogICAgLy9vbgogICAgCgogICAgLy9zYXZlCiAgICBpbnN0YW5jZSA9IHIKCn0KCmZ1bmN0aW9uIHNlbmRNZXNzYWdlKGRhdGEpIHsKICAgIAogICAgICAgIHBhcmVudFBvcnQucG9zdE1lc3NhZ2UoZGF0YSkKICAgICAgICAKfQoKYXN5bmMgZnVuY3Rpb24gcnVuKGRhdGEpIHsKICAgIC8vIGNvbnNvbGUubG9nKCdpbm5lciB3b3JrZXIgcnVuJyxkYXRhKQoKICAgIC8vbW9kZQogICAgbGV0IG1vZGUgPSBkYXRhLm1vZGUKCiAgICAvL2NoZWNrCiAgICBpZihtb2RlICE9PSAnaW5pdCcgJiYgbW9kZSAhPT0gJ2NhbGwnKXsKICAgICAgICByZXR1cm4KICAgIH0KCiAgICAvL2luaXQKICAgIGlmKG1vZGUgPT09ICdpbml0Jyl7CiAgICAgICAgCiAgICAgICAgdHJ5ewoKICAgICAgICAgICAgLy90eXBlCiAgICAgICAgICAgIGxldCB0eXBlID0gZGF0YS50eXBlCgogICAgICAgICAgICAvL2lucHV0CiAgICAgICAgICAgIGxldCBpbnB1dCA9IGRhdGEuaW5wdXQKICAgIAogICAgICAgICAgICAvL2luc3RhbmNlCiAgICAgICAgICAgIGlmKHR5cGUgPT09ICdmdW5jdGlvbicpewogICAgICAgICAgICAgICAgaW5pdCguLi5pbnB1dCkKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmKHR5cGUgPT09ICdvYmplY3QnKXsKICAgICAgICAgICAgICAgIGluc3RhbmNlID0gbWVyZ2VGaWxlcwogICAgICAgICAgICB9CgogICAgICAgIH0KICAgICAgICBjYXRjaChlcnIpewogICAgICAgIAogICAgICAgICAgICAvL3NlbmRNZXNzYWdlCiAgICAgICAgICAgIGxldCByZXMgPSB7CiAgICAgICAgICAgICAgICBtb2RlOiAnZW1pdCcsCiAgICAgICAgICAgICAgICBldk5hbWU6ICdlcnJvcicsCiAgICAgICAgICAgICAgICBtc2c6IGVyciwKICAgICAgICAgICAgfQogICAgICAgICAgICBzZW5kTWVzc2FnZShyZXMpCgogICAgICAgIH0KICAgICAgICAgICAgCiAgICB9CgogICAgLy9jaGVjawogICAgaWYobW9kZSA9PT0gJ2NhbGwnKXsKICAgICAgICBsZXQgc3RhdGUgPSAnJwogICAgICAgIGxldCBtc2cgPSBudWxsCgogICAgICAgIHRyeXsKCiAgICAgICAgICAgIC8vZnVuCiAgICAgICAgICAgIGxldCBmdW4gPSBpbnN0YW5jZVtkYXRhLmZ1bl0KCiAgICAgICAgICAgIC8vaW5wdXQKICAgICAgICAgICAgbGV0IGlucHV0ID0gZGF0YS5pbnB1dAoKICAgICAgICAgICAgLy9leGVjCiAgICAgICAgICAgIGF3YWl0IGZ1biguLi5pbnB1dCkKICAgICAgICAgICAgICAgIC50aGVuKChzdWMpID0+IHsKICAgICAgICAgICAgICAgICAgICBzdGF0ZT0nc3VjY2VzcycKICAgICAgICAgICAgICAgICAgICBtc2c9c3VjCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHsKICAgICAgICAgICAgICAgICAgICBzdGF0ZT0nZXJyb3InCiAgICAgICAgICAgICAgICAgICAgbXNnPWVycgogICAgICAgICAgICAgICAgfSkKCiAgICAgICAgfQogICAgICAgIGNhdGNoKGVycil7CiAgICAgICAgICAgIHN0YXRlID0gJ2Vycm9yJwogICAgICAgICAgICBtc2cgPSBlcnIKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLy9zZW5kTWVzc2FnZQogICAgICAgIGxldCByZXMgPSB7CiAgICAgICAgICAgIG1vZGU6ICdyZXR1cm4nLAogICAgICAgICAgICBpZDogZGF0YS5pZCwKICAgICAgICAgICAgZnVuOiBkYXRhLmZ1biwKICAgICAgICAgICAgc3RhdGUsCiAgICAgICAgICAgIG1zZywKICAgICAgICB9CiAgICAgICAgc2VuZE1lc3NhZ2UocmVzKQoKICAgIH0KCn0KCmZ1bmN0aW9uIHJlY3ZNZXNzYWdlKGRhdGEpIHsKICAgIC8vIGNvbnNvbGUubG9nKCdpbm5lciB3b3JrZXIgcmVjdjonLCBkYXRhKQoKICAgIC8vZGF0YVJlY3YKICAgIGxldCBkYXRhUmVjdiA9IGRhdGEKCiAgICAvL3J1bgogICAgcnVuKGRhdGFSZWN2KQoKfQoKCiAgICAgICAgcGFyZW50UG9ydC5vbignbWVzc2FnZScsIHJlY3ZNZXNzYWdlKQogICAgICAgIAoKdHJ5ewogICAgcHJvY2Vzcy5vbigndW5oYW5kbGVkUmVqZWN0aW9uJywgKGVycikgPT4gewogICAgICAgIGNvbnNvbGUubG9nKCdpbm5lcjp1bmhhbmRsZWRSZWplY3Rpb24nLCBlcnIpCiAgICB9KQogICAgcHJvY2Vzcy5vbigndW5jYXVnaHRFeGNlcHRpb24nLCAoZXJyKSA9PiB7CiAgICAgICAgY29uc29sZS5sb2coJ2lubmVyOnVuY2F1Z2h0RXhjZXB0aW9uJywgZXJyKQogICAgfSkKICAgIHByb2Nlc3Mub24oJ3VuY2F1Z2h0RXhjZXB0aW9uTW9uaXRvcicsIChlcnIpID0+IHsKICAgICAgICBjb25zb2xlLmxvZygnaW5uZXI6dW5jYXVnaHRFeGNlcHRpb25Nb25pdG9yJywgZXJyKQogICAgfSkKfQpjYXRjaChlcnIpe30KCg==",Buffer.from(i,"base64").toString("utf8"));var i;function o(){let r=new n,i=function(t){try{return new e.Worker(t,{eval:!0})}catch(e){c(e)}}(t);if(!i)return c("invalid worker"),null;function o(){let e=function(){let e,t,n=new Promise((function(){e=arguments[0],t=arguments[1]}));return n.resolve=e,n.reject=t,n}(),t=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=[],n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),r=n.length;for(let i=0;i<e;i++)t[i]=n[0|Math.random()*r];return t.join("")}(),n={mode:"call",id:t,fun:"main",input:[...arguments]};return i.postMessage(n),r.once(t,(t=>{"success"===t.state?e.resolve(t.msg):e.reject(t.msg)})),e}function c(e){r.emit("error",e)}return i.on("message",(function(e){let t=e,n=t.mode;"emit"!==n&&"return"!==n||("emit"===n&&r.emit(t.evName,t.msg),"return"===n&&r.emit(t.id,t))})),i.on("error",c),i.on("exit",(e=>{1!==e&&c("exit code["+e+"] !== 1")})),function(){let e={mode:"init",type:"function",input:[...arguments]};i.postMessage(e)}([...arguments]),r.main=o,r.main=o,r.terminate=function(){i?(i.terminate(),i=void 0):c("worker has been terminated")},r}r=async function(){let e=[...arguments],t=o();return await t.main(...e).finally((()=>{t.terminate()}))}}();try{process.on("unhandledRejection",(e=>{console.log("outer:unhandledRejection",e)})),process.on("uncaughtException",(e=>{console.log("outer:uncaughtException",e)})),process.on("uncaughtExceptionMonitor",(e=>{console.log("outer:uncaughtExceptionMonitor",e)}))}catch(e){}return r}(e)}({get exports(){return t},set exports(e){t=e}});var n=t,r={};!function(e,t){e.exports=function(){const e="function"==typeof Buffer,t="function"==typeof TextDecoder?new TextDecoder:void 0,n=(e=>{let t={};return e.forEach(((e,n)=>t[e]=n)),t})(("function"==typeof TextEncoder&&new TextEncoder,Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="))),r=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,i=String.fromCharCode.bind(String),o="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),c=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),u=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,l=e=>{switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return i(55296+(t>>>10))+i(56320+(1023&t));case 3:return i((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return i((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},a=e=>e.replace(u,l),s=e=>{if(e=e.replace(/\s+/g,""),!r.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(3&e.length));let t,o,c,u="";for(let r=0;r<e.length;)t=n[e.charAt(r++)]<<18|n[e.charAt(r++)]<<12|(o=n[e.charAt(r++)])<<6|(c=n[e.charAt(r++)]),u+=64===o?i(t>>16&255):64===c?i(t>>16&255,t>>8&255):i(t>>16&255,t>>8&255,255&t);return u},d="function"==typeof atob?e=>atob(c(e)):e?e=>Buffer.from(e,"base64").toString("binary"):s,f=e?e=>o(Buffer.from(e,"base64")):e=>o(d(e).split("").map((e=>e.charCodeAt(0)))),p=e?e=>Buffer.from(e,"base64").toString("utf8"):t?e=>t.decode(f(e)):e=>a(d(e)),g=e=>c(e.replace(/[-_]/g,(e=>"-"==e?"+":"/"))),I=e=>p(g(e)),h=I;var y={};!function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,c){if("function"!=typeof r)throw new TypeError("The listener must be a function");var u=new i(r,o||e,c),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],u]:e._events[l].push(u):(e._events[l]=u,e._eventsCount++),e}function c(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function u(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),u.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},u.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,c=new Array(o);i<o;i++)c[i]=r[i].fn;return c},u.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},u.prototype.emit=function(e,t,r,i,o,c){var u=n?n+e:e;if(!this._events[u])return!1;var l,a,s=this._events[u],d=arguments.length;if(s.fn){switch(s.once&&this.removeListener(e,s.fn,void 0,!0),d){case 1:return s.fn.call(s.context),!0;case 2:return s.fn.call(s.context,t),!0;case 3:return s.fn.call(s.context,t,r),!0;case 4:return s.fn.call(s.context,t,r,i),!0;case 5:return s.fn.call(s.context,t,r,i,o),!0;case 6:return s.fn.call(s.context,t,r,i,o,c),!0}for(a=1,l=new Array(d-1);a<d;a++)l[a-1]=arguments[a];s.fn.apply(s.context,l)}else{var f,p=s.length;for(a=0;a<p;a++)switch(s[a].once&&this.removeListener(e,s[a].fn,void 0,!0),d){case 1:s[a].fn.call(s[a].context);break;case 2:s[a].fn.call(s[a].context,t);break;case 3:s[a].fn.call(s[a].context,t,r);break;case 4:s[a].fn.call(s[a].context,t,r,i);break;default:if(!l)for(f=1,l=new Array(d-1);f<d;f++)l[f-1]=arguments[f];s[a].fn.apply(s[a].context,l)}}return!0},u.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},u.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},u.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return c(this,o),this;var u=this._events[o];if(u.fn)u.fn!==t||i&&!u.once||r&&u.context!==r||c(this,o);else{for(var l=0,a=[],s=u.length;l<s;l++)(u[l].fn!==t||i&&!u[l].once||r&&u[l].context!==r)&&a.push(u[l]);a.length?this._events[o]=1===a.length?a[0]:a:c(this,o)}return this},u.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&c(this,t)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,e.exports=u}({get exports(){return y},set exports(e){y=e}});var m=y;let b;!function(){if("browser"!=("undefined"!=typeof window&&void 0!==window.document?"browser":"nodejs"))return null;let e=h("CgoKInVzZSBzdHJpY3QiO3ZhciB0PXJlcXVpcmUoInBhdGgiKSxyPXJlcXVpcmUoImZzIiksZT1BcnJheS5pc0FycmF5LG49Im9iamVjdCI9PXR5cGVvZiBnbG9iYWwmJmdsb2JhbCYmZ2xvYmFsLk9iamVjdD09PU9iamVjdCYmZ2xvYmFsLG89Im9iamVjdCI9PXR5cGVvZiBzZWxmJiZzZWxmJiZzZWxmLk9iamVjdD09PU9iamVjdCYmc2VsZixpPW58fG98fEZ1bmN0aW9uKCJyZXR1cm4gdGhpcyIpKCksdT1pLlN5bWJvbCxhPU9iamVjdC5wcm90b3R5cGUsYz1hLmhhc093blByb3BlcnR5LHM9YS50b1N0cmluZyxmPXU/dS50b1N0cmluZ1RhZzp2b2lkIDA7dmFyIGw9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZzt2YXIgcD0iW29iamVjdCBOdWxsXSIsaD0iW29iamVjdCBVbmRlZmluZWRdIix5PXU/dS50b1N0cmluZ1RhZzp2b2lkIDA7ZnVuY3Rpb24gdih0KXtyZXR1cm4gbnVsbD09dD92b2lkIDA9PT10P2g6cDp5JiZ5IGluIE9iamVjdCh0KT9mdW5jdGlvbih0KXt2YXIgcj1jLmNhbGwodCxmKSxlPXRbZl07dHJ5e3RbZl09dm9pZCAwO3ZhciBuPSEwfWNhdGNoKHQpe312YXIgbz1zLmNhbGwodCk7cmV0dXJuIG4mJihyP3RbZl09ZTpkZWxldGUgdFtmXSksb30odCk6ZnVuY3Rpb24odCl7cmV0dXJuIGwuY2FsbCh0KX0odCl9dmFyIF89IltvYmplY3QgU3ltYm9sXSI7ZnVuY3Rpb24gZCh0KXtyZXR1cm4ic3ltYm9sIj09dHlwZW9mIHR8fGZ1bmN0aW9uKHQpe3JldHVybiBudWxsIT10JiYib2JqZWN0Ij09dHlwZW9mIHR9KHQpJiZ2KHQpPT1ffXZhciBiPS9cLnxcWyg/OlteW1xdXSp8KFsiJ10pKD86KD8hXDEpW15cXF18XFwuKSo/XDEpXF0vLGc9L15cdyokLztmdW5jdGlvbiBqKHQpe3ZhciByPXR5cGVvZiB0O3JldHVybiBudWxsIT10JiYoIm9iamVjdCI9PXJ8fCJmdW5jdGlvbiI9PXIpfXZhciBTPSJbb2JqZWN0IEFzeW5jRnVuY3Rpb25dIixPPSJbb2JqZWN0IEZ1bmN0aW9uXSIsbT0iW29iamVjdCBHZW5lcmF0b3JGdW5jdGlvbl0iLHc9IltvYmplY3QgUHJveHldIjt2YXIgJCx4PWlbIl9fY29yZS1qc19zaGFyZWRfXyJdLFI9KCQ9L1teLl0rJC8uZXhlYyh4JiZ4LmtleXMmJngua2V5cy5JRV9QUk9UT3x8IiIpKT8iU3ltYm9sKHNyYylfMS4iKyQ6IiI7dmFyIHo9RnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nO3ZhciBBPS9eXFtvYmplY3QgLis/Q29uc3RydWN0b3JcXSQvLEY9RnVuY3Rpb24ucHJvdG90eXBlLE49T2JqZWN0LnByb3RvdHlwZSxQPUYudG9TdHJpbmcsaz1OLmhhc093blByb3BlcnR5LEU9UmVnRXhwKCJeIitQLmNhbGwoaykucmVwbGFjZSgvW1xcXiQuKis/KClbXF17fXxdL2csIlxcJCYiKS5yZXBsYWNlKC9oYXNPd25Qcm9wZXJ0eXwoZnVuY3Rpb24pLio/KD89XFxcKCl8IGZvciAuKz8oPz1cXFxdKS9nLCIkMS4qPyIpKyIkIik7ZnVuY3Rpb24gQyh0KXtpZighaih0KXx8KHI9dCxSJiZSIGluIHIpKXJldHVybiExO3ZhciByLGU9ZnVuY3Rpb24odCl7aWYoIWoodCkpcmV0dXJuITE7dmFyIHI9dih0KTtyZXR1cm4gcj09T3x8cj09bXx8cj09U3x8cj09d30odCk/RTpBO3JldHVybiBlLnRlc3QoZnVuY3Rpb24odCl7aWYobnVsbCE9dCl7dHJ5e3JldHVybiB6LmNhbGwodCl9Y2F0Y2godCl7fXRyeXtyZXR1cm4gdCsiIn1jYXRjaCh0KXt9fXJldHVybiIifSh0KSl9ZnVuY3Rpb24gSSh0LHIpe3ZhciBlPWZ1bmN0aW9uKHQscil7cmV0dXJuIG51bGw9PXQ/dm9pZCAwOnRbcl19KHQscik7cmV0dXJuIEMoZSk/ZTp2b2lkIDB9dmFyIFQ9SShPYmplY3QsImNyZWF0ZSIpO3ZhciBNPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7dmFyIHE9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtmdW5jdGlvbiBMKHQpe3ZhciByPS0xLGU9bnVsbD09dD8wOnQubGVuZ3RoO2Zvcih0aGlzLmNsZWFyKCk7KytyPGU7KXt2YXIgbj10W3JdO3RoaXMuc2V0KG5bMF0sblsxXSl9fWZ1bmN0aW9uIFUodCxyKXtmb3IodmFyIGUsbixvPXQubGVuZ3RoO28tLTspaWYoKGU9dFtvXVswXSk9PT0obj1yKXx8ZSE9ZSYmbiE9bilyZXR1cm4gbztyZXR1cm4tMX1MLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3RoaXMuX19kYXRhX189VD9UKG51bGwpOnt9LHRoaXMuc2l6ZT0wfSxMLnByb3RvdHlwZS5kZWxldGU9ZnVuY3Rpb24odCl7dmFyIHI9dGhpcy5oYXModCkmJmRlbGV0ZSB0aGlzLl9fZGF0YV9fW3RdO3JldHVybiB0aGlzLnNpemUtPXI/MTowLHJ9LEwucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXt2YXIgcj10aGlzLl9fZGF0YV9fO2lmKFQpe3ZhciBlPXJbdF07cmV0dXJuIl9fbG9kYXNoX2hhc2hfdW5kZWZpbmVkX18iPT09ZT92b2lkIDA6ZX1yZXR1cm4gTS5jYWxsKHIsdCk/clt0XTp2b2lkIDB9LEwucHJvdG90eXBlLmhhcz1mdW5jdGlvbih0KXt2YXIgcj10aGlzLl9fZGF0YV9fO3JldHVybiBUP3ZvaWQgMCE9PXJbdF06cS5jYWxsKHIsdCl9LEwucHJvdG90eXBlLnNldD1mdW5jdGlvbih0LHIpe3ZhciBlPXRoaXMuX19kYXRhX187cmV0dXJuIHRoaXMuc2l6ZSs9dGhpcy5oYXModCk/MDoxLGVbdF09VCYmdm9pZCAwPT09cj8iX19sb2Rhc2hfaGFzaF91bmRlZmluZWRfXyI6cix0aGlzfTt2YXIgRD1BcnJheS5wcm90b3R5cGUuc3BsaWNlO2Z1bmN0aW9uIEcodCl7dmFyIHI9LTEsZT1udWxsPT10PzA6dC5sZW5ndGg7Zm9yKHRoaXMuY2xlYXIoKTsrK3I8ZTspe3ZhciBuPXRbcl07dGhpcy5zZXQoblswXSxuWzFdKX19Ry5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLl9fZGF0YV9fPVtdLHRoaXMuc2l6ZT0wfSxHLnByb3RvdHlwZS5kZWxldGU9ZnVuY3Rpb24odCl7dmFyIHI9dGhpcy5fX2RhdGFfXyxlPVUocix0KTtyZXR1cm4hKGU8MCkmJihlPT1yLmxlbmd0aC0xP3IucG9wKCk6RC5jYWxsKHIsZSwxKSwtLXRoaXMuc2l6ZSwhMCl9LEcucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXt2YXIgcj10aGlzLl9fZGF0YV9fLGU9VShyLHQpO3JldHVybiBlPDA/dm9pZCAwOnJbZV1bMV19LEcucHJvdG90eXBlLmhhcz1mdW5jdGlvbih0KXtyZXR1cm4gVSh0aGlzLl9fZGF0YV9fLHQpPi0xfSxHLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCxyKXt2YXIgZT10aGlzLl9fZGF0YV9fLG49VShlLHQpO3JldHVybiBuPDA/KCsrdGhpcy5zaXplLGUucHVzaChbdCxyXSkpOmVbbl1bMV09cix0aGlzfTt2YXIgVz1JKGksIk1hcCIpO2Z1bmN0aW9uIEIodCxyKXt2YXIgZSxuLG89dC5fX2RhdGFfXztyZXR1cm4oInN0cmluZyI9PShuPXR5cGVvZihlPXIpKXx8Im51bWJlciI9PW58fCJzeW1ib2wiPT1ufHwiYm9vbGVhbiI9PW4/Il9fcHJvdG9fXyIhPT1lOm51bGw9PT1lKT9vWyJzdHJpbmciPT10eXBlb2Ygcj8ic3RyaW5nIjoiaGFzaCJdOm8ubWFwfWZ1bmN0aW9uIEgodCl7dmFyIHI9LTEsZT1udWxsPT10PzA6dC5sZW5ndGg7Zm9yKHRoaXMuY2xlYXIoKTsrK3I8ZTspe3ZhciBuPXRbcl07dGhpcy5zZXQoblswXSxuWzFdKX19SC5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLnNpemU9MCx0aGlzLl9fZGF0YV9fPXtoYXNoOm5ldyBMLG1hcDpuZXcoV3x8Ryksc3RyaW5nOm5ldyBMfX0sSC5wcm90b3R5cGUuZGVsZXRlPWZ1bmN0aW9uKHQpe3ZhciByPUIodGhpcyx0KS5kZWxldGUodCk7cmV0dXJuIHRoaXMuc2l6ZS09cj8xOjAscn0sSC5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKHQpe3JldHVybiBCKHRoaXMsdCkuZ2V0KHQpfSxILnByb3RvdHlwZS5oYXM9ZnVuY3Rpb24odCl7cmV0dXJuIEIodGhpcyx0KS5oYXModCl9LEgucHJvdG90eXBlLnNldD1mdW5jdGlvbih0LHIpe3ZhciBlPUIodGhpcyx0KSxuPWUuc2l6ZTtyZXR1cm4gZS5zZXQodCxyKSx0aGlzLnNpemUrPWUuc2l6ZT09bj8wOjEsdGhpc307dmFyIEo9IkV4cGVjdGVkIGEgZnVuY3Rpb24iO2Z1bmN0aW9uIEsodCxyKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdHx8bnVsbCE9ciYmImZ1bmN0aW9uIiE9dHlwZW9mIHIpdGhyb3cgbmV3IFR5cGVFcnJvcihKKTt2YXIgZT1mdW5jdGlvbigpe3ZhciBuPWFyZ3VtZW50cyxvPXI/ci5hcHBseSh0aGlzLG4pOm5bMF0saT1lLmNhY2hlO2lmKGkuaGFzKG8pKXJldHVybiBpLmdldChvKTt2YXIgdT10LmFwcGx5KHRoaXMsbik7cmV0dXJuIGUuY2FjaGU9aS5zZXQobyx1KXx8aSx1fTtyZXR1cm4gZS5jYWNoZT1uZXcoSy5DYWNoZXx8SCksZX1LLkNhY2hlPUg7dmFyIFEsVixYLFk9L1teLltcXV0rfFxbKD86KC0/XGQrKD86XC5cZCspPyl8KFsiJ10pKCg/Oig/IVwyKVteXFxdfFxcLikqPylcMilcXXwoPz0oPzpcLnxcW1xdKSg/OlwufFxbXF18JCkpL2csWj0vXFwoXFwpPy9nLHR0PShRPWZ1bmN0aW9uKHQpe3ZhciByPVtdO3JldHVybiA0Nj09PXQuY2hhckNvZGVBdCgwKSYmci5wdXNoKCIiKSx0LnJlcGxhY2UoWSwoZnVuY3Rpb24odCxlLG4sbyl7ci5wdXNoKG4/by5yZXBsYWNlKFosIiQxIik6ZXx8dCl9KSkscn0sVj1LKFEsKGZ1bmN0aW9uKHQpe3JldHVybiA1MDA9PT1YLnNpemUmJlguY2xlYXIoKSx0fSkpLFg9Vi5jYWNoZSxWKSxydD10dDt2YXIgZXQ9MS8wLG50PXU/dS5wcm90b3R5cGU6dm9pZCAwLG90PW50P250LnRvU3RyaW5nOnZvaWQgMDtmdW5jdGlvbiBpdCh0KXtpZigic3RyaW5nIj09dHlwZW9mIHQpcmV0dXJuIHQ7aWYoZSh0KSlyZXR1cm4gZnVuY3Rpb24odCxyKXtmb3IodmFyIGU9LTEsbj1udWxsPT10PzA6dC5sZW5ndGgsbz1BcnJheShuKTsrK2U8bjspb1tlXT1yKHRbZV0sZSx0KTtyZXR1cm4gb30odCxpdCkrIiI7aWYoZCh0KSlyZXR1cm4gb3Q/b3QuY2FsbCh0KToiIjt2YXIgcj10KyIiO3JldHVybiIwIj09ciYmMS90PT0tZXQ/Ii0wIjpyfWZ1bmN0aW9uIHV0KHQpe3JldHVybiBudWxsPT10PyIiOml0KHQpfWZ1bmN0aW9uIGF0KHQscil7cmV0dXJuIGUodCk/dDpmdW5jdGlvbih0LHIpe2lmKGUodCkpcmV0dXJuITE7dmFyIG49dHlwZW9mIHQ7cmV0dXJuISgibnVtYmVyIiE9biYmInN5bWJvbCIhPW4mJiJib29sZWFuIiE9biYmbnVsbCE9dCYmIWQodCkpfHxnLnRlc3QodCl8fCFiLnRlc3QodCl8fG51bGwhPXImJnQgaW4gT2JqZWN0KHIpfSh0LHIpP1t0XTpydCh1dCh0KSl9dmFyIGN0PTEvMDtmdW5jdGlvbiBzdCh0KXtpZigic3RyaW5nIj09dHlwZW9mIHR8fGQodCkpcmV0dXJuIHQ7dmFyIHI9dCsiIjtyZXR1cm4iMCI9PXImJjEvdD09LWN0PyItMCI6cn1mdW5jdGlvbiBmdCh0LHIsZSl7dmFyIG49bnVsbD09dD92b2lkIDA6ZnVuY3Rpb24odCxyKXtmb3IodmFyIGU9MCxuPShyPWF0KHIsdCkpLmxlbmd0aDtudWxsIT10JiZlPG47KXQ9dFtzdChyW2UrK10pXTtyZXR1cm4gZSYmZT09bj90OnZvaWQgMH0odCxyKTtyZXR1cm4gdm9pZCAwPT09bj9lOm59ZnVuY3Rpb24gbHQoKXtsZXQgdCxyLGU9bmV3IFByb21pc2UoKGZ1bmN0aW9uKCl7dD1hcmd1bWVudHNbMF0scj1hcmd1bWVudHNbMV19KSk7cmV0dXJuIGUucmVzb2x2ZT10LGUucmVqZWN0PXIsZX1mdW5jdGlvbiBwdCh0KXtyZXR1cm4iW29iamVjdCBBcnJheV0iPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpfWZ1bmN0aW9uIGh0KHQpe2lmKGZ1bmN0aW9uKHQpe3JldHVybiJbb2JqZWN0IE9iamVjdF0iPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpfSh0KSl7Zm9yKGxldCByIGluIHQpcmV0dXJuITE7cmV0dXJuITB9cmV0dXJuITF9ZnVuY3Rpb24geXQodCl7cmV0dXJuIltvYmplY3QgU3RyaW5nXSI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCl9ZnVuY3Rpb24gdnQodCl7cmV0dXJuIHQhPXR9ZnVuY3Rpb24gX3QodCl7cmV0dXJuISFmdW5jdGlvbih0KXtyZXR1cm4iW29iamVjdCBVbmRlZmluZWRdIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KX0odCl8fCghIWZ1bmN0aW9uKHQpe3JldHVybiJbb2JqZWN0IE51bGxdIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KX0odCl8fCghIWh0KHQpfHwoISFmdW5jdGlvbih0KXtyZXR1cm4hKCF5dCh0KXx8IiIhPT10KX0odCl8fCghIWZ1bmN0aW9uKHQpe3JldHVybiEhcHQodCkmJjA9PT10Lmxlbmd0aH0odCl8fCEhdnQodCkpKSkpfWZ1bmN0aW9uIGR0KHQpe3JldHVybiEoIXl0KHQpfHwiIj09PXQpfXZhciBidD0vXHMvO3ZhciBndD0vXlxzKy87ZnVuY3Rpb24ganQodCl7cmV0dXJuIHQ/dC5zbGljZSgwLGZ1bmN0aW9uKHQpe2Zvcih2YXIgcj10Lmxlbmd0aDtyLS0mJmJ0LnRlc3QodC5jaGFyQXQocikpOyk7cmV0dXJuIHJ9KHQpKzEpLnJlcGxhY2UoZ3QsIiIpOnR9dmFyIFN0PU5hTixPdD0vXlstK10weFswLTlhLWZdKyQvaSxtdD0vXjBiWzAxXSskL2ksd3Q9L14wb1swLTddKyQvaSwkdD1wYXJzZUludDtmdW5jdGlvbiB4dCh0KXtpZigibnVtYmVyIj09dHlwZW9mIHQpcmV0dXJuIHQ7aWYoZCh0KSlyZXR1cm4gU3Q7aWYoaih0KSl7dmFyIHI9ImZ1bmN0aW9uIj09dHlwZW9mIHQudmFsdWVPZj90LnZhbHVlT2YoKTp0O3Q9aihyKT9yKyIiOnJ9aWYoInN0cmluZyIhPXR5cGVvZiB0KXJldHVybiAwPT09dD90Oit0O3Q9anQodCk7dmFyIGU9bXQudGVzdCh0KTtyZXR1cm4gZXx8d3QudGVzdCh0KT8kdCh0LnNsaWNlKDIpLGU/Mjo4KTpPdC50ZXN0KHQpP1N0Oit0fXZhciBSdD0xLzAsenQ9MTc5NzY5MzEzNDg2MjMxNTdlMjkyO2Z1bmN0aW9uIEF0KHQpe3JldHVybiB0Pyh0PXh0KHQpKT09PVJ0fHx0PT09LVJ0Pyh0PDA/LTE6MSkqenQ6dD09dD90OjA6MD09PXQ/dDowfWZ1bmN0aW9uIEZ0KHQpe3ZhciByPUF0KHQpLGU9ciUxO3JldHVybiByPT1yP2U/ci1lOnI6MH1mdW5jdGlvbiBOdCh0KXtsZXQgcj0hMTtpZihkdCh0KSlyPSFpc05hTihOdW1iZXIodCkpO2Vsc2UgaWYoZnVuY3Rpb24odCl7cmV0dXJuIltvYmplY3QgTnVtYmVyXSI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCl9KHQpKXtpZih2dCh0KSlyZXR1cm4hMTtyPSEwfXJldHVybiByfWZ1bmN0aW9uIFB0KHQpe2lmKCFOdCh0KSlyZXR1cm4gMDtyZXR1cm4gQXQodCl9ZnVuY3Rpb24ga3QodCl7cmV0dXJuISFOdCh0KSYmKHQ9UHQodCksIm51bWJlciI9PXR5cGVvZihyPXQpJiZyPT1GdChyKSk7dmFyIHJ9dmFyIEV0PWkuaXNGaW5pdGUsQ3Q9TWF0aC5taW47dmFyIEl0PWZ1bmN0aW9uKHQpe3ZhciByPU1hdGhbdF07cmV0dXJuIGZ1bmN0aW9uKHQsZSl7aWYodD14dCh0KSwoZT1udWxsPT1lPzA6Q3QoRnQoZSksMjkyKSkmJkV0KHQpKXt2YXIgbj0odXQodCkrImUiKS5zcGxpdCgiZSIpO3JldHVybisoKG49KHV0KHIoblswXSsiZSIrKCtuWzFdK2UpKSkrImUiKS5zcGxpdCgiZSIpKVswXSsiZSIrKCtuWzFdLWUpKX1yZXR1cm4gcih0KX19KCJyb3VuZCIpLFR0PUl0O2Z1bmN0aW9uIE10KHQpe2lmKCFOdCh0KSlyZXR1cm4gMDt0PVB0KHQpO2xldCByPVR0KHQpO3JldHVybiIwIj09PVN0cmluZyhyKT8wOnJ9ZnVuY3Rpb24gcXQodCl7aWYoIWt0KHQpKXJldHVybiExO3JldHVybiBNdCh0KT49MH1mdW5jdGlvbiBMdCh0LHIpe2lmKCFkdCh0KSlyZXR1cm4iIjtpZighcXQocikpcmV0dXJuIiI7aWYoMD09PShyPU10KHIpKSlyZXR1cm4iIjtsZXQgZT10Lmxlbmd0aC1yO3JldHVybiBlPDAmJihlPTApLHQuc3Vic3RyaW5nKGUsZStyKX1mdW5jdGlvbiBVdCh0LHIpe3JldHVybiBkdCh0KSYmcXQocik/MD09PShyPU10KHIpKT90OmZ1bmN0aW9uKHQscil7cmV0dXJuIGR0KHQpJiZxdChyKT8wPT09KHI9TXQocikpPyIiOnQuc3Vic3RyaW5nKDAscik6IiJ9KHQsdC5sZW5ndGgtcik6IiJ9ZnVuY3Rpb24gRHQodCl7aWYoIWR0KHQpKXJldHVybntwYXRoOiIiLGlzUm9vdDohMX07Zm9yKDt0LmluZGV4T2YoIlxcXFwiKT49MDspdD10LnJlcGxhY2UoIlxcXFwiLCJcXCIpO2Zvcig7dC5pbmRleE9mKCIvLyIpPj0wOyl0PXQucmVwbGFjZSgiLy8iLCIvIik7aWYoIjoiPT09THQodCwxKSlyZXR1cm57cGF0aDpgJHt0fVxcYCxpc1Jvb3Q6ITB9O2lmKCJcXCI9PT1MdCh0LDEpKXtsZXQgcj1VdCh0LDEpO3JldHVybiI6Ij09PUx0KHIsMSk/e3BhdGg6dCxpc1Jvb3Q6ITB9OntwYXRoOnIsaXNSb290OiExfX1pZigiLyI9PT1MdCh0LDEpKXtsZXQgcj1VdCh0LDEpO3JldHVybiAwPT09ci5sZW5ndGg/e3BhdGg6dCxpc1Jvb3Q6ITB9OntwYXRoOnIsaXNSb290OiExfX1yZXR1cm57cGF0aDp0LGlzUm9vdDohMX19ZnVuY3Rpb24gR3QodCl7aWYoIWR0KHQpKXJldHVybiIiO2xldCByPUR0KHQpO2lmKHIuaXNSb290KXJldHVybiByLnBhdGg7bGV0IGU9ZnVuY3Rpb24odCl7aWYoIWR0KHQpKXJldHVybiIiO2xldCByPUR0KHQpO2lmKHIuaXNSb290KXJldHVybiByLnBhdGg7bGV0IGU9ci5wYXRoO3RyeXtlPWUuc3BsaXQoIlxcIikucG9wKCkuc3BsaXQoIi8iKS5wb3AoKX1jYXRjaCh0KXt9cmV0dXJuIGV9KHQ9ci5wYXRoKTtpZighZHQoZSkpcmV0dXJuIHQ7bGV0IG49RHQodD1VdCh0LGUubGVuZ3RoKSk7cmV0dXJuIG4uaXNSb290LG4ucGF0aH1mdW5jdGlvbiBXdCh0LHI9e30pe2xldCBlPWZ0KHIsImZzIik7aWYoIWUuZXhpc3RzU3luYyh0KSlyZXR1cm4hMTtsZXQgbj1lLmxzdGF0U3luYyh0KTtyZXR1cm4hbi5pc0ZpbGUoKSYmIW4uaXNTeW1ib2xpY0xpbmsoKX1mdW5jdGlvbiBCdCh0LHI9e30pe2xldCBlPWZ0KHIsImZzIik7cmV0dXJuISFlLmV4aXN0c1N5bmModCkmJighZS5sc3RhdFN5bmModCkuaXNEaXJlY3RvcnkoKSYmIWUubHN0YXRTeW5jKHQpLmlzU3ltYm9saWNMaW5rKCkpfWZ1bmN0aW9uIEh0KHQscj17fSl7bGV0IGU9ZnQociwiZnMiKTtpZighZS5leGlzdHNTeW5jKHQpKXJldHVybntzdWNjZXNzOiJmaWxlIGRvZXMgbm90IGV4aXN0OiAiK3R9O2lmKCFCdCh0LHtmczplfSkpcmV0dXJue2Vycm9yOiJpbnB1dCBwYXRoIGlzIG5vdCBhIGZpbGU6ICIrdH07dHJ5e2UudW5saW5rU3luYyh0KX1jYXRjaCh0KXtyZXR1cm57ZXJyb3I6dH19cmV0dXJue3N1Y2Nlc3M6ImRvbmU6ICIrdH19YXN5bmMgZnVuY3Rpb24gSnQodCxyLGUsbj17fSl7bGV0IG89IiIsaT1mdChuLCJmcyIpO2lmKCFwdCh1PXIpfHwwPT09dS5sZW5ndGh8fDE9PT11Lmxlbmd0aCYmX3QodVswXSkpdGhyb3cgbmV3IEVycm9yKCJmcHNJbiBpbiBub3QgYW4gZWZmZWN0aXZlIGFycmF5Iik7dmFyIHU7bGV0IGE9R3QoZSk7V3QoYSx7ZnM6aX0pfHxmdW5jdGlvbih0LHI9e30pe2xldCBlPWZ0KHIsImZzIik7aWYoV3QodCx7ZnM6ZX0pKXJldHVybntzdWNjZXNzOiJpbnB1dCBmb2xkZXIgaXMgYWxyZWFkeSBleGlzdHM6ICIrdH07aWYoZS5leGlzdHNTeW5jKHQpKXJldHVybntlcnJvcjoiaW5wdXQgcGF0aCBhbHJlYWR5IGV4aXN0czogIit0fTt0cnl7ZS5ta2RpclN5bmModCx7cmVjdXJzaXZlOiEwfSl9Y2F0Y2godCl7cmV0dXJue2Vycm9yOnR9fX0oYSx7ZnM6aX0pO2xldCBjPWx0KCk7dHJ5e2xldCBuPWkuY3JlYXRlV3JpdGVTdHJlYW0oZSk7Zm9yKGxldCB0PTA7dDxyLmxlbmd0aDt0Kyspe2xldCBlPXJbdF07aWYoIUJ0KGUse2ZzOml9KSl0aHJvdyBuZXcgRXJyb3IoYGZwSW5bJHtlfV0gaXMgbm90IGEgZmlsZWApO2xldCB1PSgpPT57bGV0IHQ9bHQoKSxyPWkuY3JlYXRlUmVhZFN0cmVhbShlKTtyZXR1cm4gci5vbigiZXJyb3IiLChyPT57bz1yLm1lc3NhZ2UsdC5yZWplY3Qocil9KSksci5vbigiZW5kIiwoKCk9PntIdChlLHtmczppfSksdC5yZXNvbHZlKCl9KSksci5waXBlKG4se2VuZDohMX0pLHR9O2F3YWl0IHUoKX1uLmVuZCgpLG4ub24oImVycm9yIiwodD0+e289dC5tZXNzYWdlLGMucmVqZWN0KG8pfSkpLG4ub24oImZpbmlzaCIsKCgpPT57bGV0IHI9e2ZpbGVuYW1lOnQscGF0aDplfTtjLnJlc29sdmUocil9KSl9Y2F0Y2godCl7bz10Lm1lc3NhZ2UsYy5yZWplY3Qobyl9cmV0dXJuIGN9bGV0IG1lcmdlRmlsZXM9YXN5bmMoZSxuLG8saSk9PntsZXQgdT1bXTtmb3IobGV0IHI9MDtyPG87cisrKXtsZXQgbz10LmpvaW4oZSxgJHtufV8ke3J9YCk7dS5wdXNoKG8pfWxldCBhPXQuam9pbihlLG4pLGM9YXdhaXQgYXN5bmMgZnVuY3Rpb24odCxlLG4pe3JldHVybiBKdCh0LGUsbix7ZnM6cn0pfShpLHUsYSk7cmV0dXJuIGN9OwoKCmxldCBpbnN0YW5jZSA9IG51bGwKZnVuY3Rpb24gaW5pdChpbnB1dCl7CgogICAgLy9pbml0CiAgICBsZXQgcgogICAgCiAgICAgICAgciA9IHsKICAgICAgICAgICAgbWFpbjogbWVyZ2VGaWxlcwogICAgICAgIH0KICAgICAgICAKCiAgICAvL29uCiAgICAKCiAgICAvL3NhdmUKICAgIGluc3RhbmNlID0gcgoKfQoKZnVuY3Rpb24gc2VuZE1lc3NhZ2UoZGF0YSkgewogICAgCiAgICAgICAgc2VsZi5wb3N0TWVzc2FnZShkYXRhKQogICAgICAgIAp9Cgphc3luYyBmdW5jdGlvbiBydW4oZGF0YSkgewogICAgLy8gY29uc29sZS5sb2coJ2lubmVyIHdvcmtlciBydW4nLGRhdGEpCgogICAgLy9tb2RlCiAgICBsZXQgbW9kZSA9IGRhdGEubW9kZQoKICAgIC8vY2hlY2sKICAgIGlmKG1vZGUgIT09ICdpbml0JyAmJiBtb2RlICE9PSAnY2FsbCcpewogICAgICAgIHJldHVybgogICAgfQoKICAgIC8vaW5pdAogICAgaWYobW9kZSA9PT0gJ2luaXQnKXsKICAgICAgICAKICAgICAgICB0cnl7CgogICAgICAgICAgICAvL3R5cGUKICAgICAgICAgICAgbGV0IHR5cGUgPSBkYXRhLnR5cGUKCiAgICAgICAgICAgIC8vaW5wdXQKICAgICAgICAgICAgbGV0IGlucHV0ID0gZGF0YS5pbnB1dAogICAgCiAgICAgICAgICAgIC8vaW5zdGFuY2UKICAgICAgICAgICAgaWYodHlwZSA9PT0gJ2Z1bmN0aW9uJyl7CiAgICAgICAgICAgICAgICBpbml0KC4uLmlucHV0KQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYodHlwZSA9PT0gJ29iamVjdCcpewogICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBtZXJnZUZpbGVzCiAgICAgICAgICAgIH0KCiAgICAgICAgfQogICAgICAgIGNhdGNoKGVycil7CiAgICAgICAgCiAgICAgICAgICAgIC8vc2VuZE1lc3NhZ2UKICAgICAgICAgICAgbGV0IHJlcyA9IHsKICAgICAgICAgICAgICAgIG1vZGU6ICdlbWl0JywKICAgICAgICAgICAgICAgIGV2TmFtZTogJ2Vycm9yJywKICAgICAgICAgICAgICAgIG1zZzogZXJyLAogICAgICAgICAgICB9CiAgICAgICAgICAgIHNlbmRNZXNzYWdlKHJlcykKCiAgICAgICAgfQogICAgICAgICAgICAKICAgIH0KCiAgICAvL2NoZWNrCiAgICBpZihtb2RlID09PSAnY2FsbCcpewogICAgICAgIGxldCBzdGF0ZSA9ICcnCiAgICAgICAgbGV0IG1zZyA9IG51bGwKCiAgICAgICAgdHJ5ewoKICAgICAgICAgICAgLy9mdW4KICAgICAgICAgICAgbGV0IGZ1biA9IGluc3RhbmNlW2RhdGEuZnVuXQoKICAgICAgICAgICAgLy9pbnB1dAogICAgICAgICAgICBsZXQgaW5wdXQgPSBkYXRhLmlucHV0CgogICAgICAgICAgICAvL2V4ZWMKICAgICAgICAgICAgYXdhaXQgZnVuKC4uLmlucHV0KQogICAgICAgICAgICAgICAgLnRoZW4oKHN1YykgPT4gewogICAgICAgICAgICAgICAgICAgIHN0YXRlPSdzdWNjZXNzJwogICAgICAgICAgICAgICAgICAgIG1zZz1zdWMKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4gewogICAgICAgICAgICAgICAgICAgIHN0YXRlPSdlcnJvcicKICAgICAgICAgICAgICAgICAgICBtc2c9ZXJyCiAgICAgICAgICAgICAgICB9KQoKICAgICAgICB9CiAgICAgICAgY2F0Y2goZXJyKXsKICAgICAgICAgICAgc3RhdGUgPSAnZXJyb3InCiAgICAgICAgICAgIG1zZyA9IGVycgogICAgICAgIH0KICAgICAgICAKICAgICAgICAvL3NlbmRNZXNzYWdlCiAgICAgICAgbGV0IHJlcyA9IHsKICAgICAgICAgICAgbW9kZTogJ3JldHVybicsCiAgICAgICAgICAgIGlkOiBkYXRhLmlkLAogICAgICAgICAgICBmdW46IGRhdGEuZnVuLAogICAgICAgICAgICBzdGF0ZSwKICAgICAgICAgICAgbXNnLAogICAgICAgIH0KICAgICAgICBzZW5kTWVzc2FnZShyZXMpCgogICAgfQoKfQoKZnVuY3Rpb24gcmVjdk1lc3NhZ2UoZGF0YSkgewogICAgLy8gY29uc29sZS5sb2coJ2lubmVyIHdvcmtlciByZWN2OicsIGRhdGEpCgogICAgLy9kYXRhUmVjdgogICAgbGV0IGRhdGFSZWN2ID0gZGF0YQoKICAgIC8vcnVuCiAgICBydW4oZGF0YVJlY3YpCgp9CgoKICAgICAgICBzZWxmLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHJlY3ZNZXNzYWdlKGUuZGF0YSkKICAgICAgICB9CiAgICAgICAgCgp0cnl7CiAgICBwcm9jZXNzLm9uKCd1bmhhbmRsZWRSZWplY3Rpb24nLCAoZXJyKSA9PiB7CiAgICAgICAgY29uc29sZS5sb2coJ2lubmVyOnVuaGFuZGxlZFJlamVjdGlvbicsIGVycikKICAgIH0pCiAgICBwcm9jZXNzLm9uKCd1bmNhdWdodEV4Y2VwdGlvbicsIChlcnIpID0+IHsKICAgICAgICBjb25zb2xlLmxvZygnaW5uZXI6dW5jYXVnaHRFeGNlcHRpb24nLCBlcnIpCiAgICB9KQogICAgcHJvY2Vzcy5vbigndW5jYXVnaHRFeGNlcHRpb25Nb25pdG9yJywgKGVycikgPT4gewogICAgICAgIGNvbnNvbGUubG9nKCdpbm5lcjp1bmNhdWdodEV4Y2VwdGlvbk1vbml0b3InLCBlcnIpCiAgICB9KQp9CmNhdGNoKGVycil7fQoK");function t(){let t=new m,n=function(e){try{let t=new Blob([e]),n=window.URL||window.webkitURL;return new Worker(n.createObjectURL(t))}catch(e){i(e)}}(e);if(!n)return i("invalid worker"),null;function r(){let e=function(){let e,t,n=new Promise((function(){e=arguments[0],t=arguments[1]}));return n.resolve=e,n.reject=t,n}(),r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=[],n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),r=n.length;for(let i=0;i<e;i++)t[i]=n[0|Math.random()*r];return t.join("")}(),i={mode:"call",id:r,fun:"main",input:[...arguments]};return n.postMessage(i),t.once(r,(t=>{"success"===t.state?e.resolve(t.msg):e.reject(t.msg)})),e}function i(e){t.emit("error",e)}return n.onmessage=function(e){!function(e){let n=e,r=n.mode;"emit"!==r&&"return"!==r||("emit"===r&&t.emit(n.evName,n.msg),"return"===r&&t.emit(n.id,n))}(e.data)},n.onerror=i,n.onmessageerror=function(e){i(e.data)},function(){let e={mode:"init",type:"function",input:[...arguments]};n.postMessage(e)}([...arguments]),t.main=r,t.main=r,t.terminate=function(){n?(n.terminate(),n=void 0):i("worker has been terminated")},t}b=async function(){let e=[...arguments],n=t();return await n.main(...e).finally((()=>{n.terminate()}))}}();try{process.on("unhandledRejection",(e=>{console.log("outer:unhandledRejection",e)})),process.on("uncaughtException",(e=>{console.log("outer:uncaughtException",e)})),process.on("uncaughtExceptionMonitor",(e=>{console.log("outer:uncaughtExceptionMonitor",e)}))}catch(e){}return b}()}({get exports(){return r},set exports(e){r=e}});var i=r;let o;return o="undefined"!=typeof window&&void 0!==window.document?i:n,o}(c)}({get exports(){return En},set exports(e){En=e}});var $n=En;function qn(){let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=Ze(o,"port");$e(c)||(c=8080);let u=Ze(o,"useInert");at(u)||(u=!0);let l=Ze(o,"pathStaticFiles");Oe(l)||(l="dist");let a=Ze(o,"apiName");Oe(a)||(a="api");let s=Ze(o,"pathUploadTemp");Oe(s)||(s="./uploadTemp"),On(s,{fs:r})||kn(s);let d=Ze(o,"tokenType");Oe(d)||(d="Bearer");let f=Ze(o,"verifyConn");Ge(f)||(f=()=>!0);let p=Ze(o,"corsOrigins",[]);ut(p)||(p=["*"]);let g=Ze(o,"delayForBasic","");bt(g)||(g=0),g=Ee(g);let I=Ze(o,"delayForSlice","");bt(I)||(I=100),I=Ee(I);let h=null;h=Ze(o,"serverHapi")?o.serverHapi:e.server({port:c,routes:{timeout:{server:!1,socket:!1},cors:{origin:p,credentials:!1}}});let y=ft(),m=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];setTimeout((()=>{y.emit(e,...n)}),1)};async function b(e){let t=pt(),n=pt();return n.then((e=>{t.resolve(e)})).catch((e=>{t.reject(e)})),m("download",e,n),t}function C(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new i.Readable;r._read=()=>{},r.push(t),r.push(null);let o=Ze(n,"returnType",""),c=Ze(n,"returnMsg",""),u=e.response(r).header("Cache-Control","no-cache, no-store, must-revalidate").header("Content-Type","application/octet-stream").header("Content-Length",r.readableLength);return Oe(o)&&u.header("Return-Type",o),Oe(c)&&u.header("Return-Msg",c),u}function v(e,t){return Oe(t)||(console.log("msg",t),console.log("msg is not an effective string, set msg=''"),t=""),C(e,Jn({error:t}),{returnType:"error",returnMsg:t})}let Z={path:`/${a}`,method:"POST",options:{payload:{maxBytes:1099511627776,maxParts:1e9,timeout:!1,output:"stream",parse:!1},timeout:{server:!1,socket:!1}},handler:async function(e,t){let n=Ze(e,"headers");n=mt(n)?n:"";let r=Ze(e,"query");r=mt(r)?r:"";let o=Ze(n,"authorization","");o=Oe(o)?o:"";{let e=f({apiType:"main",authorization:o,headers:n,query:r});if(gt(e)&&(e=await e),!0!==e)return v(t,"permission denied")}m("handler",{api:"apiMain",headers:n,query:r});let c=await(()=>{let t=pt(),n=[],r=new i.Writable({write(e,t,r){n.push(e),setTimeout((()=>{r()}),g)}});return e.payload.pipe(r),e.payload.on("end",(()=>{let e=Buffer.concat(n);n=[],t.resolve(e)})),e.payload.on("error",(e=>{m("error","receive payload err"),t.reject(e.message)})),t})(),u=Bn(new Uint8Array(c)),l={},a="",s="";return await async function(e){let t=pt(),n=pt();n.then((n=>{e.output=n,delete e.input,t.resolve(e)})).catch((e=>{t.reject(e)}));{let t=Ze(e,"func",""),r=Ze(e,"input",null);m("execute",t,r,n)}return t}(u).then((e=>{l.success=e,a="success",s="need to parse"})).catch((e=>{l.error=e,a="error",s="need to parse"})),C(t,Jn(l),{returnType:a,returnMsg:s})}},X={path:`/${a}ulck`,method:"POST",options:{payload:{maxBytes:1099511627776,maxParts:1e9,timeout:!1,parse:!0},timeout:{server:!1,socket:!1}},handler:async function(e,t){let i=Ze(e,"headers");i=mt(i)?i:"";let o=Ze(e,"query");o=mt(o)?o:"";let c=Ze(i,"authorization","");c=Oe(c)?c:"";{let e=f({apiType:"upload-check",authorization:c,headers:i,query:o});if(gt(e)&&(e=await e),!0!==e)return v(t,"permission denied")}m("handler",{api:"apiUploadCheck",headers:i,query:o});let u=Ze(e,"payload.filename",""),l=Ze(e,"payload.fileSize",""),a=Ze(e,"payload.fileHash","");if(!Oe(u))return v(t,"invalid filename in payload");if(!Ne(l))return v(t,"invalid fileSize in payload");if(!Oe(a))return v(t,"invalid fileHash in payload");let d=n.join(s,u);if(!function(e){return Qn(e,{fs:r})}(d)){return C(t,Jn({success:{existed:!1,msg:"not exist"}}),{returnType:"success",returnMsg:"need to parse"})}if(l!==r.statSync(d).size){return C(t,Jn({success:{existed:!1,msg:"not equal size"}}),{returnType:"success",returnMsg:"need to parse"})}if(a!==await Dn(d)){return C(t,Jn({success:{existed:!1,msg:"not equal hash"}}),{returnType:"success",returnMsg:"need to parse"})}return C(t,Jn({success:{existed:!0,msg:"equal",path:d}}),{returnType:"success",returnMsg:"need to parse"})}},A={path:`/${a}slc`,method:"POST",options:{payload:{maxBytes:1099511627776,maxParts:1e9,timeout:!1,output:"stream",parse:!1},timeout:{server:!1,socket:!1}},handler:async function(e,t){let i=Ze(e,"headers");i=mt(i)?i:"";let o=Ze(e,"query");o=mt(o)?o:"";let c=Ze(i,"authorization","");c=Oe(c)?c:"";{let e=f({apiType:"upload-slice",authorization:c,headers:i,query:o});if(gt(e)&&(e=await e),!0!==e)return v(t,"permission denied")}m("handler",{api:"apiUploadSlice",headers:i,query:o});let u=Ze(i,"chunk-index",""),l=Ze(i,"chunk-total",""),a=Ze(i,"package-id","");if(!bt(u))return console.log("invalid chunkIndex in headers"),t.response({error:"invalid chunkIndex in headers"}).code(400);if(u=Ee(u),!bt(l))return console.log("invalid chunkTotal in headers"),t.response({error:"invalid chunkTotal in headers"}).code(400);if(l=Ee(l),!Oe(a))return console.log("invalid packageId in headers"),t.response({error:"invalid packageId in headers"}).code(400);let d=n.join(s,`${a}_${u}`),p=r.createWriteStream(d),g={},h="",y="";return await(()=>{let t=pt();return e.payload.pipe(p),e.payload.on("end",(()=>{setTimeout((()=>{t.resolve(`chunk[${u}/${l}] of packageId[${a}] done`)}),I)})),e.payload.on("error",(e=>{m("error",`receive chunk[${u}/${l}] of packageId[${a}] err`),t.reject(`apiUploadSlice receive error: ${e.message}`)})),t})().then((e=>{g.success=e,h="success",y="need to parse"})).catch((e=>{g.error=e,h="error",y="need to parse",m("error",e)})),C(t,Jn(g),{returnType:h,returnMsg:y})}},K={path:`/${a}slcm`,method:"POST",options:{payload:{maxBytes:1099511627776,maxParts:1e9,timeout:!1,parse:!0},timeout:{server:!1,socket:!1}},handler:async function(e,t){let n=Ze(e,"headers");n=mt(n)?n:"";let r=Ze(e,"query");r=mt(r)?r:"";let i=Ze(n,"authorization","");i=Oe(i)?i:"";{let e=f({apiType:"upload-slice-merge",authorization:i,headers:n,query:r});if(gt(e)&&(e=await e),!0!==e)return v(t,"permission denied")}m("handler",{api:"apiUploadSliceMerge",headers:n,query:r});let o=Ze(e,"payload.filename",""),c=Ze(e,"payload.chunk-total",""),u=Ze(e,"payload.package-id","");if(!Oe(o))return console.log("invalid filename in payload"),t.response({error:"invalid filename in payload"}).code(400);if(!bt(c))return console.log("invalid chunkTotal in payload"),t.response({error:"invalid chunkTotal in payload"}).code(400);if(c=Ee(c),!Oe(u))return console.log("invalid packageId in payload"),t.response({error:"invalid packageId in payload"}).code(400);let l={},a="",d="";return await(async()=>{let e=await $n(s,u,c,o);return await async function(e){let t=pt(),n=pt();return n.then((e=>{t.resolve(e)})).catch((e=>{t.reject(e)})),m("upload",e,n),t}(e)})().then((e=>{l.success=e,a="success",d="need to parse"})).catch((e=>{l.error=e,a="error",d="need to parse",m("error",`${e.message}`)})),C(t,Jn(l),{returnType:a,returnMsg:d})}},G={path:`/${a}dwgfn`,method:"POST",options:{payload:{maxBytes:1099511627776,maxParts:1e9,timeout:!1,parse:!0},timeout:{server:!1,socket:!1}},handler:async function(e,t){let n=Ze(e,"headers");n=mt(n)?n:"";let r=Ze(e,"query");r=mt(r)?r:"";let i=Ze(n,"authorization","");i=Oe(i)?i:"";{let e=f({apiType:"download-get-filename",authorization:i,headers:n,query:r});if(gt(e)&&(e=await e),!0!==e)return v(t,"permission denied")}m("handler",{api:"apiDownloadGetFilename",headers:n,query:r});let o=Ze(e,"payload.fileId","");if(!Oe(o))return v(t,"invalid fileId in payload");let c={fileId:o},u={},l="",a="";await b(c).then((e=>{u.success=e,l="success",a="need to parse"})).catch((e=>{u.error=e,l="error",a="need to parse"}));let s=Ze(u,"success"),d=Ze(s,"streamRead");try{d.destroy()}catch(e){}let p=Ze(s,"filename");return Oe(p)?(u={success:{filename:p}},C(t,Jn(u),{returnType:l,returnMsg:a})):v(t,"invalid filename")}},W={path:`/${a}dwgf`,method:"GET",options:{timeout:{server:!1,socket:!1}},handler:async function(e,t){let n=Ze(e,"headers");n=mt(n)?n:"";let r=Ze(e,"query");r=mt(r)?r:"";let i=Ze(r,"token","");i=Oe(i)?i:"";let o="";Oe(i)&&(o=`${d} ${i}`);{let e=f({apiType:"download-get-file",authorization:o,headers:n,query:r});if(gt(e)&&(e=await e),!0!==e)return v(t,"permission denied")}m("handler",{api:"apiDownloadGetFilename",headers:n,query:r});let c=Ze(r,"fileId","");if(c=Oe(c)?c:"",!Oe(c))return v(t,"invalid fileId in query");let u={fileId:c},l={};if(await b(u).then((e=>{l.success=e})).catch((e=>{l.error=e})),Vt(l,"error"))return v(t,"can not get file from fileId");let a=Ze(l,"success"),s=Ze(a,"streamRead"),p=Ze(a,"fileSize");if(!yt(p)){try{s.destroy()}catch(e){}return v(t,"invalid fileSize")}let g=Ze(a,"fileType");if(!Oe(g)){try{s.destroy()}catch(e){}return v(t,"invalid fileType")}return g=Ct(g),t.response(s).type(g).header("Content-Length",p)}},w={path:`/${a}dw`,method:"POST",options:{payload:{maxBytes:1099511627776,maxParts:1e9,timeout:!1,parse:!0},timeout:{server:!1,socket:!1}},handler:async function(e,t){let n=Ze(e,"headers");n=mt(n)?n:"";let r=Ze(e,"query");r=mt(r)?r:"";let i=Ze(n,"authorization","");i=Oe(i)?i:"";{let e=f({apiType:"download",authorization:i,headers:n,query:r});if(gt(e)&&(e=await e),!0!==e)return v(t,"permission denied")}m("handler",{api:"apiDownload",headers:n,query:r});let o=Ze(e,"payload.fileId","");if(!Oe(o))return v(t,"invalid fileId in payload");let c={fileId:o},u={};if(await b(c).then((e=>{u.success=e})).catch((e=>{u.error=e})),Vt(u,"error"))return v(t,"can not get file from fileId");let l=Ze(u,"success"),a=Ze(l,"streamRead"),s=Ze(l,"filename");if(!Oe(s)){try{a.destroy()}catch(e){}return v(t,"invalid filename")}s=Ht(s);let d=Ze(l,"fileSize");if(!yt(d)){try{a.destroy()}catch(e){}return v(t,"invalid fileSize")}let p=Ze(l,"fileType");if(!Oe(p)){try{a.destroy()}catch(e){}return v(t,"invalid fileType")}return p=Ct(p),t.response(a).type(p).header("Content-Disposition",`attachment; filename="${s}"`).header("Content-Length",d)}};Ze(o,"serverHapi")?h.route([Z,X,A,K,G,W,w]):async function(){u&&await h.register(t);let e=[];if(u){let t={method:"GET",path:"/{file*}",handler:{directory:{path:`${l}/`}}};e=[...e,t]}e=[...e,Z,X,A,K,G,W,w],h.route(e),await h.start(),console.log(`Server running at: ${h.info.uri}`)}();return y.stop=()=>{h.stop()},y}var er=function(){return s.Date.now()},tr="Expected a function",nr=Math.max,rr=Math.min;function ir(e,t,n){var r,i,o,c,u,l,a=0,s=!1,d=!1,f=!0;if("function"!=typeof e)throw new TypeError(tr);function p(t){var n=r,o=i;return r=i=void 0,a=t,c=e.apply(o,n)}function g(e){var n=e-l;return void 0===l||n>=t||n<0||d&&e-a>=o}function I(){var e=er();if(g(e))return h(e);u=setTimeout(I,function(e){var n=t-(e-l);return d?rr(n,o-(e-a)):n}(e))}function h(e){return u=void 0,f&&r?p(e):(r=i=void 0,c)}function y(){var e=er(),n=g(e);if(r=arguments,i=this,l=e,n){if(void 0===u)return function(e){return a=e,u=setTimeout(I,t),s?p(e):c}(l);if(d)return clearTimeout(u),u=setTimeout(I,t),p(l)}return void 0===u&&(u=setTimeout(I,t)),c}return t=Te(t)||0,W(n)&&(s=!!n.leading,o=(d="maxWait"in n)?nr(Te(n.maxWait)||0,t):o,f="trailing"in n?!!n.trailing:f),y.cancel=function(){void 0!==u&&clearTimeout(u),a=0,r=l=i=u=void 0},y.flush=function(){return void 0===u?c:h(er())},y}function or(e){var t=this.__data__=new q(e);this.size=t.size}or.prototype.clear=function(){this.__data__=new q,this.size=0},or.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},or.prototype.get=function(e){return this.__data__.get(e)},or.prototype.has=function(e){return this.__data__.has(e)},or.prototype.set=function(e,t){var n=this.__data__;if(n instanceof q){var r=n.__data__;if(!ee||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new ne(r)}return n.set(e,t),this.size=n.size,this};var cr=function(){try{var e=F(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),ur=cr;function lr(e,t,n){"__proto__"==t&&ur?ur(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function ar(e,t,n){(void 0!==n&&!D(e[t],n)||void 0===n&&!(t in e))&&lr(e,t,n)}var sr="object"==typeof exports&&exports&&!exports.nodeType&&exports,dr=sr&&"object"==typeof module&&module&&!module.nodeType&&module,fr=dr&&dr.exports===sr?s.Buffer:void 0,pr=fr?fr.allocUnsafe:void 0;function gr(e,t){if(t)return e.slice();var n=e.length,r=pr?pr(n):new e.constructor(n);return e.copy(r),r}var Ir=s.Uint8Array;function hr(e){var t=new e.constructor(e.byteLength);return new Ir(t).set(new Ir(e)),t}function yr(e,t){var n=t?hr(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function mr(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var br=Object.create,Cr=function(){function e(){}return function(t){if(!W(t))return{};if(br)return br(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),vr=Cr;function Zr(e){return"function"!=typeof e.constructor||un(e)?{}:vr(Zn(e))}function Xr(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Ar=Object.prototype.hasOwnProperty;function Kr(e,t,n){var r=e[t];Ar.call(e,t)&&D(r,n)&&(void 0!==n||t in e)||lr(e,t,n)}function Gr(e,t,n,r){var i=!n;n||(n={});for(var o=-1,c=t.length;++o<c;){var u=t[o],l=r?r(n[u],e[u],u,n,e):void 0;void 0===l&&(l=e[u]),i?lr(n,u,l):Kr(n,u,l)}return n}var Wr=Object.prototype.hasOwnProperty;function wr(e){if(!W(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=un(e),n=[];for(var r in e)("constructor"!=r||!t&&Wr.call(e,r))&&n.push(r);return n}function Hr(e){return fn(e)?on(e,!0):wr(e)}function Vr(e,t,n,r,i,o,c){var l=Xr(e,n),a=Xr(t,n),s=c.get(a);if(s)ar(e,n,s);else{var d,f=o?o(l,a,n+"",e,t,c):void 0,p=void 0===f;if(p){var g=u(a),I=!g&&kt(a),h=!g&&!I&&nn(a);f=a,g||I||h?u(l)?f=l:v(d=l)&&fn(d)?f=mr(l):I?(p=!1,f=gr(a,!0)):h?(p=!1,f=yr(a,!0)):f=[]:Hn(a)||Lt(a)?(f=l,Lt(l)?f=function(e){return Gr(e,Hr(e))}(l):W(l)&&!j(l)||(f=Zr(a))):p=!1}p&&(c.set(a,f),i(f,a,r,o,c),c.delete(a)),ar(e,n,f)}}function Sr(e,t,n,r,i){e!==t&&xt(t,(function(o,c){if(i||(i=new or),W(o))Vr(e,t,c,n,Sr,r,i);else{var u=r?r(Xr(e,c),o,c+"",e,t,i):void 0;void 0===u&&(u=o),ar(e,c,u)}}),Hr)}var jr=Math.max;var xr=ur?function(e,t){return ur(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:hn,Yr=xr,Jr=Date.now;var Tr=function(e){var t=0,n=0;return function(){var r=Jr(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(Yr),Rr=Tr;function Pr(e,t){return Rr(function(e,t,n){return t=jr(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=jr(r.length-t,0),c=Array(o);++i<o;)c[i]=r[t+i];i=-1;for(var u=Array(t+1);++i<t;)u[i]=r[i];return u[t]=n(c),function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(e,this,u)}}(e,t,hn),e+"")}var Lr,Br=(Lr=function(e,t,n){Sr(e,t,n)},Pr((function(e,t){var n=-1,r=t.length,i=r>1?t[r-1]:void 0,o=r>2?t[2]:void 0;for(i=Lr.length>3&&"function"==typeof i?(r--,i):void 0,o&&function(e,t,n){if(!W(n))return!1;var r=typeof t;return!!("number"==r?fn(n)&&Ut(t,n.length):"string"==r&&t in n)&&D(n[t],e)}(t[0],t[1],o)&&(i=r<3?void 0:i,r=1),e=Object(e);++n<r;){var c=t[n];c&&Lr(e,c,n,i)}return e})));function Qr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};if(mt(e)||(console.log("instWConverServer is not an effective object, and set instWConverServer to an EventEmitter"),e=ft()),!Vt(e,"emit"))throw new Error("instWConverServer is not an EventEmitter");let i=Ze(t,"fpTableTags","");Oe(i)||(i="./tableTags.json");let o=Ze(t,"genTag");Ge(o)||(o=()=>We()+"|"+tt(6));let c=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];setTimeout((()=>{e.emit(t,...r)}),1)};function u(){let e={};try{if(r.existsSync(i)){let t=function(e){if(!Oe(e))return{};let t={};try{t=JSON.parse(e)}catch(e){t={}}return t}(r.readFileSync(i,"utf8"));mt(t)&&(e=t)}}catch(e){c("error",{msg:"readTableTags catch",err:e})}return e}function l(){try{let e=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(rt(e))return"";let n="";try{n=t?JSON.stringify(e,null,2):JSON.stringify(e)}catch(e){n=""}return n}(n);r.writeFileSync(i,e,"utf8")}catch(e){c("error",{msg:"writeTableTags catch",err:e})}}let a=ir((()=>{l(),c("changeTableTags",n)}),200);return e.readTableTags=u,e.writeTableTags=l,e.initTableTags=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"useInputFirst";if("useInputOnly"===t)n=e;else if("useStorageOnly"===t)n=u();else if("useInputFirst"===t)n=Br(u(),e);else{if("useStorageFirst"!==t)throw new Error(`invalid mode[${t}]`);n=Br(e,u())}l()},e.setTableTags=function(){n=Br(n,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),l()},e.getTableTags=function(){return n},e.updateTableTag=function(e){n[e]=o(),a()},e}function Or(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new ne;++t<n;)this.add(e[t])}function kr(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function Nr(e,t){return e.has(t)}Or.prototype.add=Or.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Or.prototype.has=function(e){return this.__data__.has(e)};var Fr=1,Ur=2;function zr(e,t,n,r,i,o){var c=n&Fr,u=e.length,l=t.length;if(u!=l&&!(c&&l>u))return!1;var a=o.get(e),s=o.get(t);if(a&&s)return a==t&&s==e;var d=-1,f=!0,p=n&Ur?new Or:void 0;for(o.set(e,t),o.set(t,e);++d<u;){var g=e[d],I=t[d];if(r)var h=c?r(I,g,d,t,e,o):r(g,I,d,e,t,o);if(void 0!==h){if(h)continue;f=!1;break}if(p){if(!kr(t,(function(e,t){if(!Nr(p,t)&&(g===e||i(g,e,n,r,o)))return p.push(t)}))){f=!1;break}}else if(g!==I&&!i(g,I,n,r,o)){f=!1;break}}return o.delete(e),o.delete(t),f}function Mr(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function _r(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var Dr=1,Er=2,$r="[object Boolean]",qr="[object Date]",ei="[object Error]",ti="[object Map]",ni="[object Number]",ri="[object RegExp]",ii="[object Set]",oi="[object String]",ci="[object Symbol]",ui="[object ArrayBuffer]",li="[object DataView]",ai=d?d.prototype:void 0,si=ai?ai.valueOf:void 0;function di(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function fi(e,t,n){var r=t(e);return u(e)?r:di(r,n(e))}function pi(){return[]}var gi=Object.prototype.propertyIsEnumerable,Ii=Object.getOwnPropertySymbols,hi=Ii?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var c=e[n];t(c,n,e)&&(o[i++]=c)}return o}(Ii(e),(function(t){return gi.call(e,t)})))}:pi,yi=hi;function mi(e){return fi(e,pn,yi)}var bi=1,Ci=Object.prototype.hasOwnProperty;var vi=F(s,"DataView"),Zi=F(s,"Promise"),Xi=F(s,"Set"),Ai=F(s,"WeakMap"),Ki="[object Map]",Gi="[object Promise]",Wi="[object Set]",wi="[object WeakMap]",Hi="[object DataView]",Vi=R(vi),Si=R(ee),ji=R(Zi),xi=R(Xi),Yi=R(Ai),Ji=C;(vi&&Ji(new vi(new ArrayBuffer(1)))!=Hi||ee&&Ji(new ee)!=Ki||Zi&&Ji(Zi.resolve())!=Gi||Xi&&Ji(new Xi)!=Wi||Ai&&Ji(new Ai)!=wi)&&(Ji=function(e){var t=C(e),n="[object Object]"==t?e.constructor:void 0,r=n?R(n):"";if(r)switch(r){case Vi:return Hi;case Si:return Ki;case ji:return Gi;case xi:return Wi;case Yi:return wi}return t});var Ti=Ji,Ri=1,Pi="[object Arguments]",Li="[object Array]",Bi="[object Object]",Qi=Object.prototype.hasOwnProperty;function Oi(e,t,n,r,i,o){var c=u(e),l=u(t),a=c?Li:Ti(e),s=l?Li:Ti(t),d=(a=a==Pi?Bi:a)==Bi,f=(s=s==Pi?Bi:s)==Bi,p=a==s;if(p&&kt(e)){if(!kt(t))return!1;c=!0,d=!1}if(p&&!d)return o||(o=new or),c||nn(e)?zr(e,t,n,r,i,o):function(e,t,n,r,i,o,c){switch(n){case li:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case ui:return!(e.byteLength!=t.byteLength||!o(new Ir(e),new Ir(t)));case $r:case qr:case ni:return D(+e,+t);case ei:return e.name==t.name&&e.message==t.message;case ri:case oi:return e==t+"";case ti:var u=Mr;case ii:var l=r&Dr;if(u||(u=_r),e.size!=t.size&&!l)return!1;var a=c.get(e);if(a)return a==t;r|=Er,c.set(e,t);var s=zr(u(e),u(t),r,i,o,c);return c.delete(e),s;case ci:if(si)return si.call(e)==si.call(t)}return!1}(e,t,a,n,r,i,o);if(!(n&Ri)){var g=d&&Qi.call(e,"__wrapped__"),I=f&&Qi.call(t,"__wrapped__");if(g||I){var h=g?e.value():e,y=I?t.value():t;return o||(o=new or),i(h,y,n,r,o)}}return!!p&&(o||(o=new or),function(e,t,n,r,i,o){var c=n&bi,u=mi(e),l=u.length;if(l!=mi(t).length&&!c)return!1;for(var a=l;a--;){var s=u[a];if(!(c?s in t:Ci.call(t,s)))return!1}var d=o.get(e),f=o.get(t);if(d&&f)return d==t&&f==e;var p=!0;o.set(e,t),o.set(t,e);for(var g=c;++a<l;){var I=e[s=u[a]],h=t[s];if(r)var y=c?r(h,I,s,t,e,o):r(I,h,s,e,t,o);if(!(void 0===y?I===h||i(I,h,n,r,o):y)){p=!1;break}g||(g="constructor"==s)}if(p&&!g){var m=e.constructor,b=t.constructor;m==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof m&&m instanceof m&&"function"==typeof b&&b instanceof b||(p=!1)}return o.delete(e),o.delete(t),p}(e,t,n,r,i,o))}function ki(e,t,n,r,i){return e===t||(null==e||null==t||!v(e)&&!v(t)?e!=e&&t!=t:Oi(e,t,n,r,ki,i))}var Ni=1,Fi=2;function Ui(e){return e==e&&!W(e)}function zi(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}function Mi(e){var t=function(e){for(var t=pn(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Ui(i)]}return t}(e);return 1==t.length&&t[0][2]?zi(t[0][0],t[0][1]):function(n){return n===e||function(e,t,n,r){var i=n.length,o=i,c=!r;if(null==e)return!o;for(e=Object(e);i--;){var u=n[i];if(c&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++i<o;){var l=(u=n[i])[0],a=e[l],s=u[1];if(c&&u[2]){if(void 0===a&&!(l in e))return!1}else{var d=new or;if(r)var f=r(a,s,l,e,t,d);if(!(void 0===f?ki(s,a,Ni|Fi,r,d):f))return!1}}return!0}(n,e,t)}}function _i(e,t){return null!=e&&t in Object(e)}function Di(e,t){return null!=e&&function(e,t,n){for(var r=-1,i=(t=me(t,e)).length,o=!1;++r<i;){var c=Ce(t[r]);if(!(o=null!=e&&n(e,c)))break;e=e[c]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&Mt(i)&&Ut(c,i)&&(u(e)||Lt(e))}(e,t,_i)}var Ei=1,$i=2;function qi(e){return function(t){return null==t?void 0:t[e]}}function eo(e){return G(e)?qi(Ce(e)):function(e){return function(t){return ve(t,e)}}(e)}function to(e){return"function"==typeof e?e:null==e?hn:"object"==typeof e?u(e)?function(e,t){return G(e)&&Ui(t)?zi(Ce(e),t):function(n){var r=Ze(n,e);return void 0===r&&r===t?Di(n,e):ki(t,r,Ei|$i)}}(e[0],e[1]):Mi(e):eo(e)}function no(e,t){var n=-1,r=fn(e)?Array(e.length):[];return In(e,(function(e,i,o){r[++n]=t(e,i,o)})),r}var ro=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)di(t,yi(e)),e=Zn(e);return t}:pi,io=ro;function oo(e){return fi(e,Hr,io)}var co=Object.prototype.hasOwnProperty;var uo=/\w*$/;var lo=d?d.prototype:void 0,ao=lo?lo.valueOf:void 0;var so="[object Boolean]",fo="[object Date]",po="[object Map]",go="[object Number]",Io="[object RegExp]",ho="[object Set]",yo="[object String]",mo="[object Symbol]",bo="[object ArrayBuffer]",Co="[object DataView]",vo="[object Float32Array]",Zo="[object Float64Array]",Xo="[object Int8Array]",Ao="[object Int16Array]",Ko="[object Int32Array]",Go="[object Uint8Array]",Wo="[object Uint8ClampedArray]",wo="[object Uint16Array]",Ho="[object Uint32Array]";function Vo(e,t,n){var r,i=e.constructor;switch(t){case bo:return hr(e);case so:case fo:return new i(+e);case Co:return function(e,t){var n=t?hr(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case vo:case Zo:case Xo:case Ao:case Ko:case Go:case Wo:case wo:case Ho:return yr(e,n);case po:return new i;case go:case yo:return new i(e);case Io:return function(e){var t=new e.constructor(e.source,uo.exec(e));return t.lastIndex=e.lastIndex,t}(e);case ho:return new i;case mo:return r=e,ao?Object(ao.call(r)):{}}}var So=en&&en.isMap,jo=So?Dt(So):function(e){return v(e)&&"[object Map]"==Ti(e)};var xo=en&&en.isSet,Yo=xo?Dt(xo):function(e){return v(e)&&"[object Set]"==Ti(e)},Jo=1,To=2,Ro=4,Po="[object Arguments]",Lo="[object Function]",Bo="[object GeneratorFunction]",Qo="[object Object]",Oo={};function ko(e,t,n,r,i,o){var c,l=t&Jo,a=t&To,s=t&Ro;if(n&&(c=i?n(e,r,i,o):n(e)),void 0!==c)return c;if(!W(e))return e;var d=u(e);if(d){if(c=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&co.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!l)return mr(e,c)}else{var f=Ti(e),p=f==Lo||f==Bo;if(kt(e))return gr(e,l);if(f==Qo||f==Po||p&&!i){if(c=a||p?{}:Zr(e),!l)return a?function(e,t){return Gr(e,io(e),t)}(e,function(e,t){return e&&Gr(t,Hr(t),e)}(c,e)):function(e,t){return Gr(e,yi(e),t)}(e,function(e,t){return e&&Gr(t,pn(t),e)}(c,e))}else{if(!Oo[f])return i?e:{};c=Vo(e,f,l)}}o||(o=new or);var g=o.get(e);if(g)return g;o.set(e,c),Yo(e)?e.forEach((function(r){c.add(ko(r,t,n,r,e,o))})):jo(e)&&e.forEach((function(r,i){c.set(i,ko(r,t,n,i,e,o))}));var I=d?void 0:(s?a?oo:mi:a?Hr:pn)(e);return St(I||e,(function(r,i){I&&(r=e[i=r]),Kr(c,i,ko(r,t,n,i,e,o))})),c}Oo[Po]=Oo["[object Array]"]=Oo["[object ArrayBuffer]"]=Oo["[object DataView]"]=Oo["[object Boolean]"]=Oo["[object Date]"]=Oo["[object Float32Array]"]=Oo["[object Float64Array]"]=Oo["[object Int8Array]"]=Oo["[object Int16Array]"]=Oo["[object Int32Array]"]=Oo["[object Map]"]=Oo["[object Number]"]=Oo[Qo]=Oo["[object RegExp]"]=Oo["[object Set]"]=Oo["[object String]"]=Oo["[object Symbol]"]=Oo["[object Uint8Array]"]=Oo["[object Uint8ClampedArray]"]=Oo["[object Uint16Array]"]=Oo["[object Uint32Array]"]=!0,Oo["[object Error]"]=Oo[Lo]=Oo["[object WeakMap]"]=!1;var No=1,Fo=4;function Uo(e){return ko(e,No|Fo)}var zo="[object String]";var Mo=qi("length"),_o=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var Do="\\ud800-\\udfff",Eo="["+Do+"]",$o="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",qo="\\ud83c[\\udffb-\\udfff]",ec="[^"+Do+"]",tc="(?:\\ud83c[\\udde6-\\uddff]){2}",nc="[\\ud800-\\udbff][\\udc00-\\udfff]",rc="(?:"+$o+"|"+qo+")"+"?",ic="[\\ufe0e\\ufe0f]?",oc=ic+rc+("(?:\\u200d(?:"+[ec,tc,nc].join("|")+")"+ic+rc+")*"),cc="(?:"+[ec+$o+"?",$o,tc,nc,Eo].join("|")+")",uc=RegExp(qo+"(?="+qo+")|"+cc+oc,"g");function lc(e){return function(e){return _o.test(e)}(e)?function(e){for(var t=uc.lastIndex=0;uc.test(e);)++t;return t}(e):Mo(e)}var ac="[object Map]",sc="[object Set]";function dc(e){if(null==e)return 0;if(fn(e))return"string"==typeof(t=e)||!u(t)&&v(t)&&C(t)==zo?lc(e):e.length;var t,n=Ti(e);return n==ac||n==sc?e.size:dn(e).length}function fc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ft(),n={},r=null,i=Ze(e,"timeAlive");$e(i)||(i=1e4),i=Ee(i);let o=Ze(e,"timeDetect");return $e(o)||(o=50),o=Ee(o),t.trigger=function(e,c){Oe(e)?(Vt(n,e)||setTimeout((()=>{t.emit("message",{eventName:"enter",key:e,data:c,now:dc(n)})}),1),n[e]={data:c,time:Date.now()},null===r&&(r=setInterval((()=>{yn(n,((e,r)=>{if(Date.now()-e.time>i){let e=Uo(n[r]);delete n[r],t.emit("message",{eventName:"leave",key:r,data:e.data,now:dc(n)})}})),mt(n)||(clearInterval(r),r=null)}),o))):console.log("trigger need key")},t.get=function(){let e=[];return yn(n,((t,n)=>{e.push({key:n,data:t.data})})),e=Uo(e),e},t}function pc(e){let t={};if(mt(e)||(console.log("instWConverServer is not an effective object, and set instWConverServer to an EventEmitter"),e=ft()),!Vt(e,"emit"))throw new Error("instWConverServer is not an EventEmitter");let n=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];setTimeout((()=>{e.emit(t,...r)}),1)},r=fc(),i=setInterval((()=>{let e=r.get(),n=(o="key",(u(i=e)?fe:no)(i,to(o)));var i,o;let c={};yn(n,(e=>{c[e]=Ze(t,e,[])})),t=c}),1e3);r.on("message",(function(e){let{eventName:t,key:r,data:i,now:o}=e;"enter"===t?n("clientEnter",r,i):"leave"===t&&n("clientLeave",r,i),n("clientChange",o)})),e.on("execute",(function(e,i,o){if("[sys:polling]"===e)try{let e=Ze(i,"clientId",""),n=Ze(t,e,[]);n=Uo(n),t[e]=[],r.trigger(e,i),o.resolve(n)}catch(e){n("error",e),o.reject("[sys:polling] error")}}));return e.getClients=r.get,e.getMessages=()=>Uo(t),e.broadcast=e=>{if(!mt(t))return;let n={};yn(t,((t,r)=>{t.push({mode:"broadcast",data:e}),n[r]=t})),t=n},e.clearBroadcast=()=>{clearInterval(i)},e}let gc=(e,t)=>{let n={};return yn(e,(e=>{let r=e,i=Ze(t,e,"");Oe(i)&&(n[r]=i)})),n};function Ic(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!mt(e))throw new Error("invalid instWConverServer");if(0===dc(t))return e;if(!mt(n))return e;let i=Ze(r,"genTag");Ge(i)||(i=()=>We()+"|"+tt(6));let o={};return yn(t,(e=>{o[e]=i()})),e.initTableTags(o,"useInputOnly"),yn(t,(t=>{let r=n[t];if(!r)throw new Error(`invalid kpOrm[${t}]`);try{r.on("change",(()=>{e.updateTableTag(t)}))}catch(e){throw new Error(`kpOrm[${t}] can not listen to change events`)}})),e.on("changeTableTags",(n=>{e.broadcast({mode:"syncKpTable",data:gc(t,n)})})),e}function hc(e){return e!=e}function yc(e,t,n){return t==t?function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):function(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}(e,hc,n)}function mc(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}var bc=Array.prototype.splice;function Cc(e,t){return e&&e.length&&t&&t.length?function(e,t,n,r){var i=r?mc:yc,o=-1,c=t.length,u=e;for(e===t&&(t=mr(t)),n&&(u=fe(e,Dt(n)));++o<c;)for(var l=0,a=t[o],s=n?n(a):a;(l=i(u,s,l,r))>-1;)u!==e&&bc.call(u,l,1),bc.call(e,l,1);return e}(e,t):e}let vc=function(e){if(!Ge(e))throw new Error("fn is not a function");return function(){let t=pt(),n=null,r=null;try{n=e.apply(this,arguments)}catch(e){r=e}return null!==r?t.resolve({state:"error",msg:r}):gt(n)?n.then((e=>{t.resolve({state:"success",msg:e})})).catch((e=>{"cancelled"===Ze(e,"reason")?t.resolve({state:"cancelled",msg:""}):t.resolve({state:"error",msg:e})})):t.resolve({state:"success",msg:n}),t}};function Zc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!mt(e))throw new Error("invalid instWConverServer");let n=Ze(t,"getUserIdByToken",null);Ge(n)||(n=async()=>"");let r=Ze(t,"useDbOrm",null);at(r)||(r=!1);let i=null;if(r&&(i=Ze(t,"operOrm",null),!Ge(i)))throw new Error("invalid opt.operOrm when useDbOrm=true");let o=[];if(r&&(o=Ze(t,"tableNames",null),!nt(o)))throw new Error("invalid opt.tableNames when useDbOrm=true");let c=[];r&&(c=Ze(t,"methods",null),nt(c)||(c=["select","insert","save","del"]));let u=Ze(t,"kpFunExt",null);let l={};async function a(e,t,r){let i="";if(!Vt(t,"__sysToken__"))return r.resolve({state:"error",msg:"invalid token"}),r;if(i=Ct(t.__sysToken__),!Vt(t,"__sysInputArgs__"))return r.resolve({state:"error",msg:"invalid input"}),r;t=t.__sysInputArgs__;let o="";if(o=n(i),gt(o)&&(o=await o),Oe(o)||(o=""),"[sys:getFuncList]"===e){let e=pn(l);e=function(e,t){if(!ut(e))return[];if((it(t)||Ne(t)||Qe(t)||at(t))&&(t=[t]),!ut(t))return e;let n=Uo(e);return Cc(n,t),n}(e,"[sys:getTableTags]");let t={state:"success",msg:e};return r.resolve(t),r}if(!Vt(l,e))return r.resolve({state:"error",msg:`invalid func[${e}]`}),r;let c=l[e];try{let e=await vc(c)(o,...t);r.resolve(e)}catch(t){r.resolve({state:"error",msg:`call func[${e}] has an error: ${t.message}`})}return r}return r&&(o=Uo(o),l=function(e,t,n){let r={};return yn(e,(e=>{yn(t,(t=>{r[`${e}.${t}`]=async function(r,i){return await n(r,e,t,i)}}))})),r}(o,c,i)),mt(u)&&yn(u,((e,t)=>{l[t]=e})),e.on("execute",(async function(t,n,r){await a(t,n,r).catch((n=>{e.emit("error",n),r.resolve({state:"error",msg:`execFun func[${t}] has an error: ${n.message}`})}))})),e}function Xc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ac(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xc(Object(n),!0).forEach((function(t){Un(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Kc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(mt(e)||(console.log("instWConverServer is not an effective object, and set instWConverServer to an EventEmitter"),e=ft()),!Vt(e,"emit"))throw new Error("instWConverServer is not an EventEmitter");let n=Ze(t,"fpTableTags",null);Oe(n)||(n="./tableTags.json");let r=Ze(t,"genTag");Ge(r)||(r=()=>We()+"|"+tt(6)),e=new pc(e=new Qr(e,{fpTableTags:n,genTag:r}));let i=Ze(t,"useDbOrm",null);at(i)||(i=!0);let o=Ze(t,"kpOrm",null),c=Ze(t,"operOrm",null),u=Ze(t,"tableNamesExec",null),l=Ze(t,"methodsExec",null),a=Ze(t,"tableNamesSync",null),s=Ze(t,"getUserIdByToken",null),d=Ze(t,"kpFunExt",null);if(mt(d)||(d={}),d=Ac(Ac({},d),{},{"[sys:getTableTags]":()=>{let t=e.getTableTags();return{mode:"syncKpTable",data:gc(a,t)}}}),e=new Zc(e,{getUserIdByToken:s,useDbOrm:i,operOrm:c,tableNames:u,methods:l,kpFunExt:d}),i){if(!it(o))return e.emit("error","invalid opt.kpOrm when useDbOrm=true"),e;e=new Ic(e,a,o,{genTag:r})}return e}return function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=ft(),i=null,o=null,c=Ze(n,"port");Ue(c)||(c=8080);let u=Ze(n,"corsOrigins",[]);ut(u)||(u=["http://localhost"]);let l=Ze(n,"useInert");at(l)||(l=!0);let a=Ze(n,"pathStaticFiles");Oe(a)||(a="dist");let s=Ze(n,"apis");ut(s)||(s=[]);let d=Ze(n,"verifyConn");Ge(d)||(d=()=>!0);let f=Ze(n,"apiName");Oe(f)||(f="api");let p=Ze(n,"getUserIdByToken",null),g=Ze(n,"useDbOrm",null);at(g)||(g=!0);let I=Ze(n,"kpOrm",null),h=Ze(n,"operOrm",null),y=Ze(n,"tableNamesExec",null),m=Ze(n,"methodsExec",null),b=Ze(n,"tableNamesSync",null),C=Ze(n,"kpFunExt",null),v=Ze(n,"fnTableTags",null),Z=Ze(n,"genTag");Ge(Z)||(Z=()=>We()+"|"+tt(6));let X=Ze(n,"showLog");return at(X)||(X=!0),(async()=>{await(async()=>{i=new e.Server({port:c,routes:{timeout:{server:!1,socket:!1},cors:{origin:u,credentials:!1}}}),l&&await i.register(t);let n=[];l&&(n=[{method:"GET",path:"/{file*}",handler:{directory:{path:`${a}/`}}}]),n=[...n,...s],i.route(n)})(),await(async()=>{o=new qn({serverHapi:i,verifyConn:d,apiName:f}),o.on("open",(function(){X&&console.log(`Server[port:${c}]: open`)})),o.on("clientChange",(function(e){X&&console.log(`Server[port:${c}]: now clients: ${e}`)}))})(),await(async()=>{o=new Kc(o,{getUserIdByToken:p,useDbOrm:g,kpOrm:I,operOrm:h,tableNamesExec:y,tableNamesSync:b,methodsExec:m,kpFunExt:C,fnTableTags:v,genTag:Z}),o.on("error",(e=>{r.emit("error",e)}))})(),await i.start(),X&&console.log(`Server running at: ${i.info.uri}`)})().catch((e=>{r.emit("error",e)})),process.on("unhandledRejection",(e=>{console.log("unhandledRejection",e),r.emit("error",{mode:"unhandledRejection",err:e})})),process.on("uncaughtException",(e=>{console.log("uncaughtException",e),r.emit("error",{mode:"uncaughtException",err:e})})),r.getServer=async()=>(await It((()=>null!==i)),i),r.getInstWConverServer=async()=>(await It((()=>null!==o)),o),r}}));
//# sourceMappingURL=w-serv-hapi-server.umd.js.map
